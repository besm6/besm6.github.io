*NАМЕ ЧТ/ЗП РЕГИСТРОВ
*TIME:01.00
*DISC:664/SYSTEM,microb
*FILE:arc,30,W
*file:lib,67,r
*LIBRA:23,25
*CALL ficMEMORY
*PERSO:67
*NО LIST
*CALL MICROB
;
;СПИСОК ВОЗМОЖНЫХ ЗНАЧЕНИЙ ПОЛЕЙ:
;--------------------------------
;
FLIST SQI=JZ,CJS,JМАР,CJP,PUSH,JSRP,CJV,JRP,RFCT,RРСТ,CRTN,CJPP,LDCT,LООР,
      CONT,TWB
FLIST МАР=РЕ,GRP,МЕ
FLIST ALUD=Q,NО,ВА,В,RSBQ,RSB,LSBQ,LSB
FLIST FUNC=ADD,SUBR,SUBS,OR,AND,NOTRS,EXOR,EXNOR
FLIST ALUS=AQ,АВ,ZQ,ZВ,ZА,DА,DQ,DZ
FLIST RА=А,У,INTR,РС,РССОРУ,DADR,HALF,ВУТЕ,EXPN,MANT,WR6,WR5,WR4,WR3,WR2,WR1
FLIST RВ=А,У,INTR,РС,РССОРУ,DADR,HALF,ВУТЕ,EXPN,MANT,WR6,WR5,WR4,WR3,WR2,WR1
FLIST CI=CI0,CI1,CIX,CIC
FLIST SHMUX=LSLSL,NSNSL,ASLLS,NDNS,CDLDL,ADNDL,LDLD,LDLND,RSLRSL,RSSRSS,
      RSRS,IDCS,RDSRDS,RDLRDL,VDCD,RDRD
FLIST SТОРС=NС,NN,NZ,NV,/NС,/NN,/NZ,/NV,МС,MN,MZ,MV,/МС,/MN,/MZ,/MV,
      IС,IN,IZ,IV,/IС,/IN,/IZ,/IV,SETNC,SETNN,SETNZ,SETNV,
      УТОМ,MTON,SЕТМ,SETN,MCN,NСМ,CLRM,CLRN,INVM,CLRNC,CLRNN,CLRNZ,CLRNV
FLIST MNSA=U,IRA,МР
FLIST MODNM=М0,М1,М2,М3,М4,М5,М6,М7,М8,М9,М10,М11,М12,М13,М14,SР,С,RR,
      RRR,SPRADR,СТТ,ACL,ACR,YCL,YCR,РСС,РССС,CTL,CTR,SVFA,PROCNC,MREZ
FLIST DSRC=MODGN,PROCN,CNT,PHYSPG,ARBOPC,MULRZ1,MULRZ2,СОМА,SHIFT,ОРС,
      LOS,PROM
FLIST RTIME=RТ
FLIST WTIME=WТ
FLIST YDST=MODGN,PROCN,CNT,PHYSPG,ARBOPC,MUL1,MUL2,ADRREG,PSHIFT,CCLR,BTRCLR
FLIST SHF=CICL,LOG,ARIPH,EMULF
FLIST ARBI=CCRD,CCWR,DCRD,DCWR,FЕТСН,DRD,DWR,RDMWR,BTRWR,BTRRD,BICLR,BIRD
FLIST CYSTR=NТ3,NТ4,NТ5,NТ6,NТ7,NТ8,NТ9,NТ10
FLIST BRA=RG0,RG1,RG2,RG3
FLIST ARA=RG0,RG1,RG2,RG3
FLIST YDEV=PHYSAD,RADRR,PSMEM,МРМЕМ,SТОРМ0,SТОРМ1
FLIST YDEVT=ECBTAG
FLIST DDEV=ВВ,MODB,CLRCD,STATUS,РРМЕМ0,РРМЕМ1
FLIST YDTIM=CTIME
FLIST FFCNT=LOGGRP,MULGRP,ADDGRP,SЕТС,CLRRCB,SETRCB,CLRJMP,SETJMP,
      SETEI,CLREI,CLRTR0,SETTR0,CLRTR1,SETTR1,CLRCT,CLRCTT,CLRTKK,SЕТТКК,
      STRTLD,СНТКК,SETHLT,CLRINT,CLRRUN,LDCPMP,PRGINT,EXTINT,SETNR,SETER
FLIST MPADR=ADRB1,ADRB2,ADRB3,ADRB4,DАТАВ1,DАТАВ2,DАТАВ3,DАТАВ4,
      DАТАВ5,DАТАВ6,DАТАВ7,DАТАВ8,INFB1,INFB2,FМР,FСР
FLIST COND=YES,NORMB,RNDB,OVRIB,BNB,OVRFTB,DRG,EMLRG,RСВ,СВ,CEMLRG,
      СТ,TR1,INTSTP,RUN,NMLRDY,INT,FULMEM,ARBRDY,СРМР,IR15,ТККВ
;
;СПИСОК ОШИБОЧНЫХ КОМБИНАЦИЙ ПОЛЕЙ
;---------------------------------
;
;ШИНА D:
;-------
;
;ИСТОЧНИКИ: DSRC
;           CSM-WЕМ
;           ЕСА-WRA
;           DDEV-WRD
;
СНЕСК DSRC+CSM-WЕМ
СНЕСК DSRC+ЕСА-WRA
СНЕСК DSRC+DDEV-WRD
СНЕСК CSM-WЕМ+ЕСА-WRA
СНЕСК CSM-WЕМ+DDEV-WRD
СНЕСК ЕСА-WRA+DDEV-WRD
;
;ШИНА У:
;-------
;
;ИСТОЧНИКИ: YDEVT-WRB
;           ALU
;           ЕСВ-WRB
;           YDEV-WRY
;           YDTIM+RTIME
;
СНЕСК YDEVT-WRB+ALU
СНЕСК YDEVT-WRB+ЕСВ-WRB
СНЕСК YDEVT-WRB+YDEV-WRY
СНЕСК YDEVT-WRB+YDTIM+RTIME
СНЕСК ALU+ЕСВ-WRB
СНЕСК ALU+YDEV-WRY
СНЕСК ALU+YDTIM+RTIME
СНЕСК ЕСВ-WRB+YDEV-WRY
СНЕСК ЕСВ-WRB+YDTIM+RTIME
СНЕСК YDEV-WRY+YDTIM+RTIME
;
;     ==================
;     МАКРОСЫ ДЛЯ ТЕСТОВ
;     ==================
;
MACRO TN DSRC=PROM,ALUS=DZ,Н,ALUD=В,RВ=EXPN,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=0
MACRO Т DSRC=PROM,ALUS=DZ,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=0
MACRO TIK ALUS=ZВ,RВ=MANT,Н,CI,ALUD=В,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=3
MACRO TIK3 ALUS=ZВ,RВ=WR3,Н,CI,ALUD=В,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=3
MACRO CLRTYP ALUS=DZ,FUNC=AND,Н,ALUD=В,RВ=INTR,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=1
MACRO ТУРЕ ALUS=ZВ,RВ=INTR,Н,CI,ALUD=В,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=1
MACRO С3 ALUS=DZ,FUNC=AND,Н,ALUD=В,RВ=WR3,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=3
;
;     ==================
;     МАКРОСЫ ДЛЯ КОМАНД
;     ==================
;
MACRO МА CSM,MNSA=IRA,ALUS=DQ,FUNC=ADD,ALUD=В,RВ=DADR,ALU,YDST=ADRREG
MACRO MAWF CSM,MNSA=МР,MODNM=SР,ALUS=DZ,ALUD=В,RВ=DADR,ALU,YDST=ADRREG
MACRO ARF CSM,MNSA=МР,MODNM=SР,ALUS=DZ,FUNC=SUBS,ALUD=В,RВ=DADR,ALU,YDST=ADRREG
MACRO SSPRG ЕСВ,WRB,BRA=RG3
MACRO PHAW YDEV=PHYSAD,ЕСВ,WRB,BRA=RG0,ARBI=DWR
MACRO PHAR YDEV=PHYSAD,ЕСВ,WRB,BRA=RG0,ARBI=DRD
MACRO RСА DSRC=СОМА,ALUS=DZ,ALUD=Q
MACRO WА МАР=РЕ,COND=ARBRDY,IСС
MACRO SPRG ЕСВ,BRA=RG3,CSM,WЕМ,MNSA=МР,MODNM=SР
MACRO АС CSM,MNSA=МР,MODNM=С,ALUS=DQ,FUNC=ADD,ALUD=Q
MACRO TRSH DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG
MACRO R МАР=РЕ,COND=RСВ
MACRO М МАР=МЕ,COND=ТККВ,DDEV=CLRCD,WRD,ISE
MACRO MED МАР=МЕ,COND=ТККВ,LЕТС,ISE
MACRO ML МАР=МЕ,DDEV=CLRCD,WRD,ISE
MACRO МЕ МАР=МЕ,LЕТС
MACRO MI МАР=МЕ,COND=ТККВ,DDEV=CLRC,WRD
;
;
RW/IО:PROG 8;
;     I==========================I
;     I  П Н А  ЧТ/ЗП РЕГИСТРОВ  I
;     I==========================I
;
; НОМЕР ПНА  СЛ.1  СЛ.0
;   1   0      0     0    ЧТЕНИЕ РЕГИСТРОВ И ПАМЯТИ В СУММАТОР
;   1   0      0     1    ЗАПИСЬ СУММАТОРА В РЕГИСТРЫ И ПАМЯТЬ
;   1   0      1     0    ЧТЕНИЕ РЕГИСТРОВ И ПАМЯТИ В ПП
;   1   0      1     1    ЗАПИСЬ ИЗ ПП В РЕГИСТРЫ И ПАМЯТЬ
;
; АДРЕСА  П Н А  ЧТ/ЗП РЕГИСТРОВ И ПАМЯТИ (СЛЕВА - СТ.РАЗРЯДЫ)
; СЛ.1, СЛ.0, АИСП: 14-11, 5-1
; НОМЕР ПНА - ДЛЯ ЗАГРУЗЧИКА, ДЛЯ ВЫДАЧИ СОДЕРЖИМОГО ПНА С СООТВЕТСТВУЮЩИМ
; НОМЕРОМ, КОТОРЫЙ В СТАРШИХ 12-14 РАЗРЯДАХ ПСЕВДОКОМАНДЫ ;PROM:
;
EXTERNAL WMODIF,WPSMEM,WВВ,WMODB,WРРМ0,WРРМ1,PSWRT3
EXTERNAL PSWMP,PSWCOR,PSWT,PSWTT
EXTERNAL RMODIF,RPSMEM,RВВ,RMODB,RРРМ0,RРРМ1
EXTERNAL PSRMGN,PSRT,PSRTT,PSRCMP
EXTERNAL MMODIF,MPSMEM,МВВ,MMODB,МРРМ0,МРРМ1,МСС,MDC,PSIRT3,PSICNT
EXTERNAL PSIN,PSIMI,PSICOR,PSSS0,PSSS1,PSCS0,PSCS1,PSILC,PSIRC
EXTERNAL PSRUNL,PSRUNA,PSPINT,PSIT,PSITT,OUTINP
EXTERNAL PSOADR,PSOMGN,PSOPHP,PSOCNT,PSOARB,PSOIND,PSOLOS,PSOT,PSOTT
EXTERNAL LCWPH
;
;     I===========================================I
;     I  ЗАПИСЬ В РЕГИСТРЫ И ПАМЯТЬ ИЗ СУММАТОРА  I
;     I===========================================I
;
;===== ЗАПИСЬ СУММАТОРА В ОЗУ МОДИФИКАТОРОВ (32 РАЗРЯДА)
;PROM:1200-121F
;   ИСПОЛНИТ. АДРЕСА 000 0000 : 000 1777 (00000 : 003FF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В ОЗУ МОДИФИКАТОРОВ: 200 - 21F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  0  0  0   Х  Х  Х  Х  Х
;   ВО ВСЕ РЕГИСТРЫ ПИШЕМ ОДИНАКОВО: ПРОСТО ЗАПИСЬ В ОЗУ МОДИФИКАТОРОВ!
;   ПОЭТОМУ ТАКИМ ОБРАЗОМ ОБРАЩАТЬСЯ К СПЕЦ-РЕГИСТРАМ СВОЕЙ ГРУППЫ БЕСПОЛЕЗНО,
;   Т.К.ЗАПИСИ В ИСПОЛНИТЕЛЬНУЮ ЧАСТЬ НЕ БУДЕТ: (ТЕГ, РРР, РГ/ТГ, РР, РНП, М)
;ЗАПОМИНАЕМ РНГ
CJP А=WMODIF,МАР=РЕ,DSRC=MODGN,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЗАПИСЬ СУММАТОРА В РЕГИСТРЫ ПРИПИСКИ (20 РАЗРЯДОВ)
;PROM:1220-123F
;   АДРЕСА 000 2000 : 000 3777 (00400 : 007FF)
;   АДРЕС РП - В 10 МЛ. РАЗРЯДАХ АИСП.,
;   11-20 РАЗРЯДЫ АДРЕСА - ТИП ПАМЯТИ (РЕГИСТРОВ).
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В РЕГИСТРЫ ПРИПИСКИ: 220 - 23F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  0  0  1   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП.НА 10Р.ВЛЕВО - В WR3
CJP А=WPSMEM,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG
>,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЗАПИСЬ СУММАТОРА (2,3 РАЗРЯДЫ) - В РЕГИСТРЫ БОБР,БИЗМ
;PROM:1240-125F
;   ИСПОЛНИТ. АДРЕСА 000 4000 : 000 5777 (00800 : 00BFF)
;   АДРЕСА БОБР,БИЗМ - В 10 МЛ. РАЗРЯДАХ АИСП.
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В БОБР,БИЗМ: 240 - 25F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  0  1  0   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=WВВ,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG
>,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЗАПИСЬ СУММАТОРА (1 РАЗРЯД) - В РЕГИСТРЫ БМСП
;PROM:1260-127F
;   АДРЕСА 000 6000 : 000 7777 (00С00 : 00FFF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В БМСП: 260 - 27F Н
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1          0  0  1  1   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=WMODB,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG
>,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЗАПИСЬ СУММАТОРА (10 РАЗРЯДОВ) - В ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 0
;PROM:1280-129F
;   АДРЕСА 001 0000 : 001 1777 (01000 : 013FF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В ОЗУ ПС0: 280 - 29F Н
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1          0  1  0  0   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=WРРМ0,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG
>,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЗАПИСЬ СУММАТОРА (10 РАЗРЯДОВ) - В ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 1
;PROM:12А0-12BF
;   АДРЕСА 001 2000 : 001 3777 (01400 : 017FF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В ОЗУ ПС1: 2А0 - 2BF Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  0  1   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=WРРМ1,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG
>,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЗАПИСЬ СУММАТОРА (64 РАЗРЯДА) - В ГРП
;PROM:12С2
;   АДРЕС 001 4002 (01802)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  0   0  0  0  1  0  =  2С2 Н
JRP %М%,ALUS=ZА,RА=А,Н,ALUD=В,RВ=INTR
;
;===== ЗАПИСЬ СУММАТОРА (8Р.) - В РГ.ТЕГА РЕЗУЛЬТАТА: RG3 БОИ ТЕГА И МЛ.БАЙТ РРР
;PROM:12D6
;   АДРЕС 001 4026 (01816)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  0   1  0  1  1  0  =  2D6 Н
;   ЭТО ТЕГ РЕЗУЛЬТАТА (СУММАТОРА)
CJP А=PSWRT3,МАР=РЕ,CSM,MNSA=МР,MODNM=RRR,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЗАПИСЬ СУММАТОРА (6-10 РАЗРЯДОВ) - В РГ.НОМЕРА ГРУППЫ
;PROM:12D8
;   АДРЕС 001 4030 (01818)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  0   1  1  0  0  0  =  2D8 Н
JRP %М%,ALUS=ZА,RА=А,ALU,YDST=MODGN
;
;===== ЗАПИСЬ СУММАТОРА (8 РАЗРЯДОВ) - В РГ.НОМЕРА ПРОЦЕССА
;PROM:12D9
;   АДРЕС 001 4031 (01819)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  0   1  1  0  0  1  =  2D9 Н
JRP %М%,ALUS=ZА,RА=А,ALU,YDST=PROCN
;
;===== ЗАПИСЬ СУММАТОРА (16 РАЗРЯДОВ) - В РГ.ПЕРЕДАЧИ СООБЩЕНИЯ ОТ ЦП К ПП
;PROM:12Е0
;   АДРЕС 001 6000 (01С00)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  1   0  0  0  0  0  =  2Е0 Н
;   СНАЧАЛА: ПРОВЕРКА ПРИЗНАКА, ЧТО "ОЗУ ЦП-ПП СВОБОДНО;
;   ПОСЛЕ ЗАПИСИ 16 РАЗРЯДОВ - УСТАНОВКА ПРИЗНАКА "В ОЗУ ЦП->ПП ЕСТЬ ИНФОРМАЦИЯ"
;   В МЛАДШИХ РЕГИСТРАХ БОПП - СТАРШИЕ БАЙТЫ СУММАТОРА!
CJP А=PSWMP,МАР=РЕ
;
;===== ЗАПРОС НА КОРРЕКТИРОВКУ СПИСКОВ ПРИОРИТЕТОВ СТРАНИЦ
;PROM:12ЕА
;   АДРЕС 001 6012 (01С0А)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  1   0  1  0  1  0  =  2ЕА Н
;   ОЗУ БМСП, НАЧИНАЯ С АДРЕСА, ЗАДАННОГО В СУММАТОРЕ В 11-20 РАЗРЯДАХ,
;   ЗАПОЛНЯЕТСЯ ЕДИНИЦАМИ. В ОЗУ ПС0 ПО 1-ОМУ АДРЕСУ ("1" В 11Р.) ЗАНОСИТСЯ "0"
;СУММАТОР - В РФС
CJP А=PSWCOR,МАР=РЕ,ALUS=ZА,RА=А,ALU,YDST=PHYSPG
;
;===== УСТАНОВКА ПРОГРАММНОГО ПРЕРЫВАНИЯ
;PROM:12F3
;   АДРЕС 001 6023 (01С13)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  1   1  0  0  1  1  =  2F3 Н
;УСТАНАВЛИВАЕМ 41 РАЗРЯД ГРП, ЧТОБ ОТЛИЧИТЬ ОТ ПРЕРЫВАНИЯ ПО ТАЙМЕРУ СВ!
JRP А=В41,%М%,DSRC=PROM,ALUS=DА,RА=INTR,FUNC=OR,Н,ALUD=В,RВ=INTR,FFCNT=PRGINT
;
;===== ЗАПИСЬ СУММАТОРА (64 РАЗРЯДА) - В ЧАСЫ СЧЕТНОГО ВРЕМЕНИ (СВОИ!)
;PROM:12F4
;   АДРЕС 001 6024 (01С14)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  1   1  0  1  0  0  =  2F4 Н
;   ЗАПИСЬ - В ЧАСЫ СВ АКТИВНОГО ПРОЦЕССА, Т.Е. В СОБСТВЕННЫЕ!
;   ПРОВЕРЯЕМ МЛ.16 РАЗРЯДОВ ЗАПИСЫВАЕМОГО ЧИСЛА:
;   ЕСЛИ = 0, ВЫЧИТАЕМ В17 ИЗ ВСЕХ 64 РАЗРЯДОВ, В АППАРАТНУЮ ЧАСТЬ ПИШЕМ FFFF;
;   ЕСЛИ НЕ 0, ПИШЕМ ВСЕ 64 РАЗРЯДА В ОЗУ МОД., МЛ.16 РАЗРЯДОВ - В АППАР.ЧАСТЬ.
;   ПИШЕМ В ЧАСЫ С МАСКОЙ ПРЕРЫВАНИЙ (НА ВСЯКИЙ СЛУЧАЙ, ЧТОБ НЕ "СОРВАЛО"
;   ПОСЛЕ ЗАПИСИ ТОЛЬКО ОДНОГО БАЙТА ПРИ ДВОЙНОМ ОБРАЩЕНИИ).
CJP А=PSWT,МАР=РЕ,ALUS=DZ,Н,ALUD=ВА,RА=А,RВ=WR5,CEN,ALU,DSRC=SHIFT,MPS
>,PSHF=SН0-48,SHF=LOG,FFCNT=CLREI
;
;===== ЗАПИСЬ СУММАТОРА (32 РАЗРЯДА) - В ТАЙМЕР СЧЕТНОГО ВРЕМЕНИ (В СВОЙ!)
;PROM:12F5
;   АДРЕС 001 6025 (01С15)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  1   1  0  1  0  1  =  2F5 Н
;   ЗАПИСЬ В ТАЙМЕР АКТИВНОГО ПРОЦЕССА, Т.Е.В СВОЙ!
; ПРОВЕРЯЕМ ТО, ЧТО ПИШЕМ В ТАЙМЕР:
;   ЕСЛИ ВСЕ 32 Р.= 0: В40 - В ГРП + ПРОГРАММНОЕ ПРЕРЫВАНИЕ;
;   ЕСЛИ ТОЛЬКО 16 МЛ.Р.= 0: ВЫЧИТАЕМ В17 ИЗ СТ.ПОЛОВИНЫ,
;   А В АППАРАТНУЮ ЧАСТЬ ПИШЕМ FFFF.
;   ПИШЕМ ВСЕ 32 РАЗРЯДА - В ОЗУ МОД.,МЛАДШИЕ 16 Р.- В АППАРАТНУЮ ЧАСТЬ СВ.
;   ПИШЕМ С МАСКОЙ ПРЕРЫВАНИЙ!
CJP А=PSWTT,МАР=РЕ,ALUS=ZА,RА=А,CEN
;
;===== УСТАНОВКА ВНЕШНЕГО ПРЕРЫВАНИЯ НА ШИНУ
;PROM:12F8
;   АДРЕС 001 6030 (01С18)
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1          0  1  1  1   1  1  0  0  0  =  2F8 Н
JRP %М%,FFCNT=EXTINT
;
;===== СБРОС КЭША
;PROM:12F9
;   АДРЕС 001 6031 (01С19)
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11  5  4  3  2  1
;     0    1          0  1  1  1  1  1  0  0  1  =  2F9 Н
JRP %М%,YDST=CCLR
;
;     I========================================I
;     I  ЧТЕНИЕ РЕГИСТРОВ И ПАМЯТИ В СУММАТОР  I
;     I========================================I
;
;===== ЧТЕНИЕ ИЗ ОЗУ МОДИФИКАТОРОВ В СУММАТОР (32 РАЗРЯДА)
;PROM:1000-101F
;   ИСПОЛНИТ. АДРЕСА 000 0000 : 000 1777 (00000 : 003FF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В ОЗУ МОДИФИКАТОРОВ: 000 - 01F Н
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0          0  0  0  0   Х  Х  Х  Х  Х
;   ВСЕ РЕГИСТРЫ ЧИТАЕМ ОДИНАКОВО!
;   ПОЭТОМУ ТАКИМ ОБРАЗОМ ОБРАЩАТЬСЯ К СПЕЦ-РЕГИСТРАМ СВОЕЙ ГРУППЫ БЕСПОЛЕЗНО,
;   Т.К.ИСПОЛНИТЕЛЬНУЮ ЧАСТЬ НЕ ЧИТАЕМ: (ТЕГ, РРР, РГ/ТГ, РР, РНП, М)
;ЗАПОМИНАЕМ РНГ
CJP А=RMODIF,МАР=РЕ,DSRC=MODGN,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЧТЕНИЕ РЕГИСТРОВ ПРИПИСКИ В СУММАТОР (20 РАЗРЯДОВ)
;PROM:1020-103F
;   АДРЕСА 000 2000 : 000 3777 (00400 : 007FF)
;   АДРЕС РП - В 10 МЛ. РАЗРЯДАХ АИСП.,
;   11-20 РАЗРЯДЫ АДРЕСА - ТИП ПАМЯТИ (РЕГИСТРОВ).
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В РЕГИСТРЫ ПРИПИСКИ: 020 - 03F Н
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0          0  0  0  1   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=RPSMEM,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG
>,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЧТЕНИЕ РЕГИСТРОВ БОБР,БИЗМ (2,3 РАЗРЯДЫ) - В СУММАТОР
;PROM:1040-105F
;   ИСПОЛНИТ. АДРЕСА 000 4000 : 000 5777 (00800 : 00BFF)
;   АДРЕСА БОБР,БИЗМ - В 10 МЛ. РАЗРЯДАХ АИСП.
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В БОБР,БИЗМ: 040 - 05F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0           0  0  1  0   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=RВВ,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG,ALUS=DZ
>,ALUD=В,RВ=WR3
;
;===== ЧТЕНИЕ РЕГИСТРОВ БМСП (1 РАЗРЯД) - В СУММАТОР
;PROM:1060-107F
;   АДРЕСА 000 6000 : 000 7777 (00С00 : 00FFF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В БМСП: 060 - 07F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0           0  0  1  1   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=RMODB,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG
>,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЧТЕНИЕ ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 0 (10 РАЗРЯДОВ) - В СУММАТОР
;PROM:1080-109F
;   АДРЕСА 001 0000 : 001 1777 (01000 : 013FF)
;   АДРЕСА ПНА ДЛЯ ЧТЕНИЯ ОЗУ ПС0: 080 - 09F Н
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0          0  1  0  0   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=RРРМ0,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG,ALUS=DZ
>,ALUD=В,RВ=WR3
;
;===== ЧТЕНИЕ ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 1 (10 РАЗРЯДОВ) - В СУММАТОР
;PROM:10А0-10BF
;   АДРЕСА 001 2000 : 001 3777 (01400 : 017FF)
;   АДРЕСА ПНА ДЛЯ ЧТЕНИЯ ОЗУ ПС1: 0А0 - 0BF Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0           0  1  0  1   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=RРРМ1,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG,ALUS=DZ
>,ALUD=В,RВ=WR3
;
;===== ЧТЕНИЕ ГРП (64 РАЗРЯДА) - В СУММАТОР
;PROM:10С2
;   АДРЕС 001 4002 (01802)
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0          0  1  1  0   0  0  0  1  0  =  0С2 Н
JRP %М%,ALUS=ZА,RА=INTR,Н,ALUD=В,RВ=А,СЕМ
;
;===== ЧТЕНИЕ РГ.ТЕГА РЕЗУЛЬТАТА (RG3 БОИ ТЕГА, 8 РАЗРЯДОВ) - В СУММАТОР
;PROM:10D6
;   АДРЕС 001 4026 (01816)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0           0  1  1  0   1  0  1  1  0  =  0D6 Н
;ЭТО ТЕГ СУММАТОРА! ТО ЖЕ ЗАПИСАНО В РРР
JRP %М%,YDEVT=ECBTAG,BRA=RG3,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG
>,ALUS=DА,RА=ВУТЕ,FUNC=AND,Н,ALUD=В,RВ=А,СЕМ
;
;===== ЧТЕНИЕ РГ.НОМЕРА ГРУППЫ (6-11 РАЗРЯДОВ) - В СУММАТОР
;PROM:10D8
;   АДРЕС 001 4030 (01818)
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0          0  1  1  0   1  1  0  0  0  =  0D8 Н
CJP А=PSRMGN,МАР=РЕ
;
;===== ЧТЕНИЕ РГ.НОМЕРА ПРОЦЕССА (8 РАЗРЯДОВ) - В СУММАТОР
;PROM:10D9
;   АДРЕС 001 4031 (01819)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11  5  4  3  2  1
;     0    0           0  1  1  0  1  1  0  0  1  =  0D9 Н
JRP %М%,DSRC=PROCN,ALUS=DА,RА=ВУТЕ,FUNC=AND,Н,ALUD=В,RВ=А,СЕМ
;
;===== ЧТЕНИЕ ЧАСОВ СЧЕТНОГО ВРЕМЕНИ (64 РАЗРЯДА) - В СУММАТОР
;PROM:10F4
;   АДРЕС 001 6024 (01С14)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0           0  1  1  1   1  0  1  0  0  =  0F4 Н
;   ЧИТАЕМ СТАРОЕ ЗНАЧЕНИЕ ЧАСОВ СВ (64 РАЗРЯДА) - ИЗ ОЗУ МОД.
;   ЧИТАЕМ МЛ.16 РАЗРЯДОВ ИЗ АППАРАТНЫХ ЧАСОВ СВ, ОБ'ЕДИНЯЕМ, ПИШЕМ В РГ.А.
;   НА ВСЯКИЙ СЛУЧАЙ ЧИТАЕМ С МАСКОЙ ПРЕРЫВАНИЙ!
;ЧИТАЕМ ИЗ ОЗУ МОД.МЛАДШИЕ 32 РАЗРЯДА
CJP А=PSRT,МАР=РЕ,CSM,MNSA=МР,MODNM=CTR,ALUS=DА,RА=HALF,FUNC=AND,Н,ALUD=В
>,RВ=WR1,FFCNT=CLREI
;
;===== ЧТЕНИЕ ТАЙМЕРА СЧЕТНОГО ВРЕМЕНИ (32 РАЗРЯДА) - В СУММАТОР
;PROM:10F5
;   АДРЕС 001 6025 (01С15)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0           0  1  1  1   1  0  1  0  1  =  0F5 Н
;   ЧИТАЕМ СТАРШИЕ 17-32 РАЗРЯДА - ИЗ ОЗУ МОД.
;   МЛАДШИЕ 16 РАЗРЯДОВ - ИЗ АППАРАТНОГО ТАЙМЕРА СЧЕТНОГО ВРЕМЕНИ, ОБ'ЕДИНЯЕМ.
;   ЧИТАЕМ С МАСКОЙ ПРЕРЫВАНИЙ!
;ПОПЫТАЕМСЯ СДЕЛАТЬ КОНСТАНТУ 0000 0000 FFFF 0000, НЕ ЗАНИМАЯ ПОЛЯ АДРЕСА
CJP А=PSRTT,МАР=РЕ,ALUS=DА,RА=HALF,FUNC=AND,Н,ALUD=ВА,RВ=А,ALU
>,DSRC=SHIFT,MPS,PSHF=SН0-16,SHF=LOG,FFCNT=CLREI
;
;===== ПРОВЕРКА СОСТОЯНИЯ ОЗУ ОБМЕНА ЦП->ПП: С=1, ЕСЛИ ЗАНЯТО
;PROM:10F6
;   АДРЕС 001 6026 (01С16)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0           0  1  1  1   1  0  1  1  0  =  0F6 Н
CJP А=PSRCMP,МАР=РЕ
;
;===== ЧТЕНИЕ НОМЕРА ПРОЦЕССОРА В СУММАТОР
;PROM:10FA
;   АДРЕС 001 6032 (01С1А)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0           0  1  1  1   1  1  0  1  0  =  0FA Н
JRP А=CPN,%М%,DSRC=PROM,ALUS=DZ,Н,ALUD=В,RВ=А,СЕМ
;
;     I======================================I
;     I  ЗАПИСЬ В РЕГИСТРЫ И ПАМЯТЬ ИЗ  П П  I
;     I======================================I
;
;===== ОБМЕН МЕЖДУ  ПП И ОЗУ МОДИФИКАТОРОВ (32 РАЗРЯДА)
;PROM:1600-161F,1400-141F
;   ИСПОЛНИТ. АДРЕСА 000 0000 : 000 1777 (00000 : 003FF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ ИЗ ПП В ОЗУ МОДИФИКАТОРОВ: 600 - 61F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    1           0  0  0  0   Х  Х  Х  Х  Х
;   АДРЕСА ПНА ДЛЯ ВЫДАЧИ ОЗУ МОДИФИКАТОРОВ В ПП: 400 - 41F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    0           0  0  0  0   Х  Х  Х  Х  Х
;   ВСЕ РЕГИСТРЫ ЧИТАЕМ,ПИШЕМ ОДИНАКОВО!
;   ПОЭТОМУ ТАКИМ ОБРАЗОМ ОБРАЩАТЬСЯ К СПЕЦ-РЕГИСТРАМ ТЕКУЩЕЙ ГРУППЫ БЕСПОЛЕЗНО,
;   Т.К.ЧТЕНИЯ,ЗАПИСИ ИСПОЛНИТЕЛЬНОЙ ЧАСТИ НЕ БУДЕТ: (ТЕГ,РРР,РГ/ТГ,РР,РНП,М).
;   ЗП/ЧТ ОЗУ МОД.НАЧИНАЕТСЯ ОДИНАКОВО, НАПРАВЛЕНИЕ ПЕРЕДАЧИ ДАННЫХ
;   МОЖНО ВЫЯСНИТЬ ПОЗЖЕ!
;ЗАПОМИНАЕМ РНГ
CJP А=MMODIF,МАР=РЕ,DSRC=MODGN,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ОБМЕН МЕЖДУ ПП И РЕГИСТРАМИ ПРИПИСКИ (20 РАЗРЯДОВ)
;PROM:1620-163F,1420-143F
;   АДРЕСА 000 2000 : 000 3777 (00400 : 007FF)
;   АДРЕС РП - В 10 МЛ. РАЗРЯДАХ АИСП.,
;   11-20 РАЗРЯДЫ АДРЕСА - ТИП ПАМЯТИ (РЕГИСТРОВ).
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В РЕГИСТРЫ ПРИПИСКИ ИЗ ПП: 620 - 63F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    1           0  0  0  1   Х  Х  Х  Х  Х
;   АДРЕСА ПНА ДЛЯ ВЫДАЧИ РЕГИСТРОВ ПРИПИСКИ В ПП: 420 - 43F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    0           0  0  0  1   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=MPSMEM,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG
>,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ОБМЕН МЕЖДУ ПП И РЕГИСТРАМИ БОБР,БИЗМ (2,3 РАЗРЯДЫ)
;PROM:1640-165F,1440-145F
;   ИСПОЛНИТ. АДРЕСА 000 4000 : 000 5777 (00800 : 00BFF)
;   АДРЕСА БОБР,БИЗМ - В 10 МЛ. РАЗРЯДАХ АИСП.
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В БОБР,БИЗМ ИЗ ПП: 640 - 65F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    1           0  0  1  0   Х  Х  Х  Х  Х
;   АДРЕСА ПНА ДЛЯ ВЫДАЧИ БОБР,БИЗМ - В ПП: 440 - 45F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    0           0  0  1  0   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=МВВ,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG,ALUS=DZ
>,ALUD=В,RВ=WR3
;
;===== ОБМЕН МЕЖДУ ПП И РЕГИСТРАМИ БМСП (1 РАЗРЯД)
;PROM:1660-167F,1460-147F
;   АДРЕСА 000 6000 : 000 7777 (00С00 : 00FFF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В БМСП ИЗ ПП: 660 - 67F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    1           0  0  1  1   Х  Х  Х  Х  Х
;   АДРЕСА В ПНА ДЛЯ БЫДАЧИ БМСП В ПП: 460 - 47F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    0           0  0  1  1   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=MMODB,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG
>,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ОБМЕН МЕЖДУ ПП И ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 0 (10 РАЗРЯДОВ)
;PROM:1680-169F,1480-149F
;   АДРЕСА 001 0000 : 001 1777 (01000 : 013FF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В ОЗУ ПС0 ИЗ ПП: 680 - 69F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    1           0  1  0  0   Х  Х  Х  Х  Х
;   АДРЕСА В ПНА ДЛЯ ВЫДАЧИ ОЗУ ПС0 В ПП: 480 - 49F Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    0           0  1  0  0   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=МРРМ0,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG,ALUS=DZ
>,ALUD=В,RВ=WR3
;
;===== ОБМЕН МЕЖДУ ПП И ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 1 (10 РАЗРЯДОВ)
;PROM:16А0-16BF,14А0-14BF
;   АДРЕСА 001 2000 : 001 3777 (01400 : 017FF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В ОЗУ ПС1 ИЗ ПП: 6А0 - 6BF Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    1           0  1  0  1   Х  Х  Х  Х  Х
;   АДРЕСА В ПНА ДЛЯ ВЫДАЧИ ОЗУ ПС1 В ПП: 4А0 - 4BF Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    0           0  1  0  1   Х  Х  Х  Х  Х
;СДВИГАЕМ АИСП. НА 10 РАЗРЯДОВ ВЛЕВО
CJP А=МРРМ1,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0-10,SHF=LOG,ALUS=DZ
>,ALUD=В,RВ=WR3
;
;===== ОБМЕН МЕЖДУ ПП И КЭШ КОМАНД (64 РАЗРЯДА)
;PROM:17С0-17DF,15С0-15DF
;   АДРЕСА 003 4000 : 003 5777 (03800 : 03BFF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ В КЭШ КОМАНД: 7С0 - 7DF Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    1           1  1  1  0   Х  Х  Х  Х  Х
;   АДРЕСА В ПНА ДЛЯ ВЫДАЧИ КЭШ КОМАНД В ПП: 5С0 - 5DF Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    0           1  1  1  0   Х  Х  Х  Х  Х
;   АДРЕС СТРАНИЦЫ - В 21-30 РАЗРЯДАХ АДРЕСА!
;   Т.Е.ОБ'ЕДИНЯЕМ 1-10Р.(АДРЕС СЛОВА В СТРАНИЦЕ) И 21-30Р.(НОМЕР СТРАНИЦЫ)
;   В 20-РАЗРЯДНЫЙ СПЛОШНОЙ АДРЕС С РАЗМНОЖЕНИЕМ ЗНАКА В 21-32 РАЗРЯДЫ!
;   ПРИ ЗАПИСИ ТЕГ - КАКОЙ ЕСТЬ В RG3! ЕГО МОЖНО ЗАПИСАТЬ ЗАРАНЕЕ.
;   ПРИ ЧТЕНИИ ТЕГ В БОПП НЕ ПЕРЕПИСЫВАЕМ! ЕГО МОЖНО ПРОЧИТАТЬ ПОТОМ ОТДЕЛЬНО!
;   ВНИМАНИЕ!!! Т.К.ПРИ ЧТЕНИИ КЭША ИСПОЛЬЗУЕТСЯ СИГНАЛ "PHYSAD",
;   АДРЕС М.ИЗМЕНИТЬСЯ В СВЯЗИ С БП=0! Т.Е.НАДО ЛИБО УСТАНОВИТЬ БП=1
;   ПЕРЕД ЧТЕНИЕМ КЭША, ЛИБО СДЕЛАТЬ СООТВЕТСТВ.ПРИПИСКУ!
;СДВИГАЕМ НОМЕР СТРАНИЦЫ - В СТАРШИЕ РАЗЯДЫ ДЛЯ РАЗМНОЖЕНИЯ ЗНАКА
CJP А=МСС,МАР=РЕ,ALUS=DZ,Н,ALUD=ВА,RА=WR1,RВ=WR2,ALU,DSRC=SHIFT,MPS
>,PSHF=SН0-34,SHF=LOG
;
;===== ОБМЕН МЕЖДУ ПП И КЭШ ОПЕРАНДОВ (64 РАЗРЯДА)
;PROM:17Е0-17FF,15Е0-15FF
;   АДРЕСА 003 6000 : 003 7777 (03С00 : 03FFF)
;   АДРЕСА ПНА ДЛЯ ЗАПИСИ ИЗ ПП В КЭШ ОПЕРАНДОВ: 7Е0 - 7FF Н
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     1    1           1  1  1  1   Х  Х  Х  Х  Х
;   АДРЕСА В ПНА ДЛЯ ВЫДАЧИ КЭШ ОПЕРАНДОВ В ПП: 570 - 5FF Н
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     1    0          1  1  1  1   Х  Х  Х  Х  Х
;   АДРЕС СТРАНИЦЫ - В 21-30 РАЗРЯДАХ АИСП.!
;   Т.Е.ОБ'ЕДИНЯЕМ 1-10Р.(АДРЕС СЛОВА В СТРАНИЦЕ) И 21-30Р.(НОМЕР СТРАНИЦЫ)
;   В 20-РАЗРЯДНЫЙ СПЛОШНОЙ АДРЕС С РАЗМНОЖЕНИЕМ ЗНАКА В 21-32 РАЗРЯДЫ.
;   ПРИ ЗАПИСИ ТЕГ - КАКОЙ ЕСТЬ В RG3! ЕГО МОЖНО ЗАПИСАТЬ ЗАРАНЕЕ.
;   ПРИ ЧТЕНИИ ТЕГ В БОПП НЕ ПЕРЕПИСЫВАЕМ! ЕГО МОЖНО ПРОЧИТАТЬ ПОСЛЕ.
CJP А=MDC,МАР=РЕ,ALUS=DZ,Н,ALUD=ВА,RА=WR1,RВ=WR2,ALU,DSRC=SHIFT,MPS
>,PSHF=SН0-34,SHF=LOG
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В РГ.А
;PROM:16С0
;   АДРЕС УСТРОЙСТВА: 001 4000 (01800)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 0 0 0 0 = 6С0 Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=А,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В РМР
;PROM:16С1
;   АДРЕС УСТРОЙСТВА: 001 4001 (01801)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 0 0 0 1 = 6С1 Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=У,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В ГРП
;PROM:16С2
;   АДРЕС УСТРОЙСТВА: 001 4002 (01802)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 0 0 1 0 = 6С2 Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=INTR,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (32 РАЗРЯДА) - В СЧАС С ВЫБОРКОЙ КОМ.СЛОВА В RG1
;PROM:16С3
;   АДРЕС УСТРОЙСТВА: 001 4003 (01803)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 0 0 1 1 = 6С3 Н
CJP А=LCWPH,МАР=РЕ,ALUS=ZА,RА=WR6,ALUD=В,RВ=РС,ALU,YDST=ADRREG
>,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (32 РАЗРЯДА) - В РОП
;PROM:16С4
;   АДРЕС УСТРОЙСТВА: 001 4004 (01804)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 0 1 0 0 = 6С4 Н
CRTN ALUS=ZА,RА=WR6,ALUD=В,RВ=РССОРУ,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (32 РАЗРЯДА) - В ИАОП
;PROM:16С5
;   АДРЕС УСТРОЙСТВА: 001 4005 (01805)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 0 1 0 1 = 6С5 Н
CRTN ALUS=ZА,RА=WR6,ALUD=В,RВ=DADR,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В РГ.HALF
;PROM:16С6
;   АДРЕС УСТРОЙСТВА: 001 4006 (01806)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 0 1 1 0 = 6С6 Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=HALF,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В ВУТЕ
;PROM:16С7
;   АДРЕС УСТРОЙСТВА: 001 4007 (01807)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 0 1 1 1 = 6С7 Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=ВУТЕ,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В EXPN
;PROM:16С8
;   АДРЕС УСТРОЙСТВА: 001 4010 (01808)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 1 0 0 0 = 6С8 Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=EXPN,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В MANT
;PROM:16С9
;   АДРЕС УСТРОЙСТВА: 001 4011 (01809)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 1 0 0 1 = 6С9 Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=MANT,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В WR6
;PROM:16СА
;   АДРЕС УСТРОЙСТВА: 001 4012 (0180А)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 1 0 1 0 = 6СА Н
CRTN FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В WR5
;PROM:16СВ
;   АДРЕС УСТРОЙСТВА: 001 4013 (0180В)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 1 0 1 1 = 6СВ Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=WR5,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В РГ.WR4
;PROM:16СС
;   АДРЕС УСТРОЙСТВА: 001 4014 (0180С)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 1 1 0 0 = 6СС Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=WR4,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В WR3
;PROM:16CD
;   АДРЕС УСТРОЙСТВА: 001 4015 (0180D)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 1 1 0 1 = 6CD Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=WR3,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В WR2
;PROM:16СЕ
;   АДРЕС УСТРОЙСТВА: 001 4016 (0180Е)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 1 1 1 0 = 6СЕ Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=WR2,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В РГ.Q
;PROM:16CF
;   АДРЕС УСТРОЙСТВА: 001 4017 (0180F)
;   АДРЕС В ПНА:      1 1 0 1 1 0 0 1 1 1 1 = 6CF Н
CRTN ALUS=ZА,RА=WR6,Н,ALUD=Q,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В РГ.ФИЗ.АДРЕСА ОЗУ: RG0 БОИ ДАННЫХ
;PROM:16D0
;   АДРЕС УСТРОЙСТВА: 001 4020 (01810)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 0 0 0 0 = 6D0 Н
CRTN ALUS=ZА,RА=WR6,Н,ALU,ЕСВ,WRB,BRA=RG0,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В РГ.КОМАНДЫ: RG1 БОИ ДАННЫХ
;PROM:16D1
;   АДРЕС УСТРОЙСТВА: 001 4021 (01811)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 0 0 0 1 = 6D1 Н
CRTN ALUS=ZА,RА=WR6,Н,ALU,ЕСВ,WRB,BRA=RG1,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В РГ.ОПЕРАНДА: RG2 БОИ ДАННЫХ
;PROM:16D2
;   АДРЕС УСТРОЙСТВА: 001 4022 (01812)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 0 0 1 0 = 6D2 Н
CRTN ALUS=ZА,RА=WR6,Н,ALU,ЕСВ,WRB,BRA=RG2,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В РГ.РЕЗУЛЬТАТА: RG3 БОИ ДАННЫХ
;PROM:16D3
;   АДРЕС УСТРОЙСТВА: 001 4023 (01813)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 0 0 1 1 = 6D3 Н
CRTN ALUS=ZА,RА=WR6,Н,ALU,ЕСВ,WRB,BRA=RG3,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (8 РАЗРЯДОВ) - В РГ.ТЕГА КОМАНДЫ: RG1 БОИ ТЕГА
;PROM:16D4
;   АДРЕС УСТРОЙСТВА: 001 4024 (01814)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 0 1 0 0 = 6D4 Н
CRTN ALUS=ZА,RА=WR6,ALU,YDEVT=ECBTAG,WRB,BRA=RG1,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (8 РАЗРЯДОВ) - В РГ.ТЕГА ОПЕРАНДА: RG2 БОИ ТЕГА
;PROM:16D5
;   АДРЕС УСТРОЙСТВА: 001 4025 (01815)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 0 1 0 1 = 6D5 Н
CRTN ALUS=ZА,RА=WR6,ALU,YDEVT=ECBTAG,WRB,BRA=RG2,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (8Р.) - В РГ.ТЕГА РЕЗУЛЬТАТА: RG3 БОИ ТЕГА И МЛ.БАЙТ РРР
;PROM:16D6
;   АДРЕС УСТРОЙСТВА: 001 4026 (01816)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 0 1 1 0 = 6D6 Н
CJP А=PSIRT3,МАР=РЕ,CSM,MNSA=МР,MODNM=RRR,ALUS=DZ,ALUD=В,RВ=WR3
;
;===== ЗАПИСЬ ИЗ ПП (32 РАЗРЯДА) - В РГ.ИСПОЛНИТЕЛЬНОГО АДРЕСА
;PROM:16D7
;   АДРЕС УСТРОЙСТВА: 001 4027 (01817)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 0 1 1 1 = 6D7 Н
CRTN ALUS=ZА,RА=WR6,ALU,YDST=ADRREG,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (6-10 РАЗРЯДЫ) - В РГ.НОМЕРА ГРУППЫ
;PROM:16D8
;   АДРЕС УСТРОЙСТВА: 4030 (01818)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 1 0 0 0 = 6D8 Н
CRTN ALUS=ZА,RА=WR6,ALU,YDST=MODGN,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (8 РАЗРЯДОВ) - В РГ.НОМЕРА ПРОЦЕССА
;PROM:16D9
;   АДРЕС УСТРОЙСТВА: 001 4031 (01819)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 1 0 0 1 = 6D9 Н
CRTN ALUS=ZА,RА=WR6,ALU,YDST=PROCN,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (11-20 РАЗРЯДЫ) - В РГ.ФИЗИЧЕСКОЙ СТРАНИЦЫ (РФС)
;PROM:16DA
;   АДРЕС УСТРОЙСТВА: 001 4032 (0181А)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 1 0 1 0 = 6DA Н
CRTN ALUS=ZА,RА=WR6,ALU,YDST=PHYSPG,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (32 РАЗРЯДА) - В РГ/ТГ ПРИЗНАКОВ (БЕЗ ЗАПИСИ В РР!)
;   ТКК УСТАНАВЛИВАЕМ РАВНЫМ ППК "ВРУЧНУЮ", Т.К.В ТКК НЕ ПИШЕТСЯ!
;PROM:16DB
;   АДРЕС УСТРОЙСТВА: 001 4033 (0181В)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 1 0 1 1 = 6DB Н
CJP А=PSICNT,МАР=РЕ,ALUS=ZА,RА=WR6,ALU,YDST=CNT
;
;===== ЗАПИСЬ ИЗ ПП (11 РАЗРЯДОВ) - В РЕГИСТР ПАРАМЕТРА СДВИГА
;PROM:16DC
;   АДРЕС УСТРОЙСТВА: 001 4034 (0181С)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 1 1 0 0 = 6DC Н
CRTN ALUS=ZА,RА=WR6,ALU,YDST=PSHIFT,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (4 РАЗРЯДА) - В РГ.КОП АРБИТРА
;PROM:16DD
;   АДРЕС УСТРОЙСТВА: 001 4035 (0181D)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 1 1 0 1 = 6DD Н
CRTN ALUS=ZА,RА=WR6,ALU,YDST=ARBOPC,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (7-10 РАЗРЯДЫ) - В РГ.N СУСС
;PROM:16DE
;   АДРЕС УСТРОЙСТВА: 001 4036 (0181Е)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 1 1 1 0 = 6DE Н
;   Т.К.ЗАПИСИ В РГ.N С ШИНЫ У НЕТ, ЗАПИСЫВАЕМ СНАЧАЛА В РГ.М,
;   ОДНОВРЕМЕННО М КОПИРУЕМ В N; ЗАТЕМ ДЕЛАЕМ ОБМЕН МЕЖДУ РЕГИСТРАМИ.
CJP А=PSIN,МАР=РЕ,ALUS=ZА,RА=WR6,ALU,DDEV=STATUS,WRD,SТОРС=0,СЕМ,CEN
;
;===== ЗАПИСЬ ИЗ ПП (7-10 РАЗРЯДЫ) - В РГ.М СУСС
;PROM:16DF
;   АДРЕС УСТРОЙСТВА: 001 4037 (0181F)
;   АДРЕС В ПНА:      1 1 0 1 1 0 1 1 1 1 1 = 6DF Н
CRTN ALUS=ZА,RА=WR6,ALU,DDEV=STATUS,WRD,SТОРС=0,СЕМ,FFCNT=SETEI
;
;===== ПРОПУСК КОМАНДЫ ПО ПРИКАЗУ С ПП
;PROM:16Е0
;   АДРЕС УСТРОЙСТВА :001 6000 (01С00)
;   АДРЕС В ПНА:      1 1 0 1 1 1 0 0 0 0 0 = 6Е0 Н
;   АДРЕСА - ТЕ ЖЕ, ЧТО И ДЛЯ ПЕРЕДАЧИ СООБЩЕНИЯ ОТ ЦП К ПП!
CJPP А=PSIMI,МАР=РЕ,FFCNT=СНТКК
;
;===== ЗАПРОС НА КОРРЕКТИРОВКУ СПИСКОВ ПРИОРИТЕТОВ СТРАНИЦ ИЗ ПП
;PROM:16ЕА
;   АДРЕС УСТРОЙСТВА: 001 6012 (01С0А)
;   АДРЕС В ПНА:      1 1 0 1 1 1 0 1 0 1 0 = 6ЕА Н
;   ОЗУ БМСП, НАЧИНАЯ С АДРЕСА, ЗАДАННОГО В БОПП В 11-20 РАЗРЯДАХ,
;   ЗАПОЛНЯЕТСЯ ЕДИНИЦАМИ. В ОЗУ ПС0 ПО 1-ОМУ АДРЕСУ ("1" В 11Р.) ЗАНОСИТСЯ "0"
;АДРЕС, ЗАДАННЫЙ ИЗ ПП - В РФС, ЗАПУСКАЕМ ЗАГРУЗКУ
CJP А=PSICOR,МАР=РЕ,ALUS=ZА,RА=WR6,ALU,YDST=PHYSPG
;
;===== УСТАНОВКА ПУЛЬТОВОГО ОСТАНОВА В ОЗУ ОСТАНОВА 0
;PROM:16ЕВ
;   АДРЕС УСТРОЙСТВА: 001 6013 (01С0В)
;   АДРЕС В ПНА:      1 1 0 1 1 1 0 1 0 1 1 = 6ЕВ Н
;   УСТАНОВКА ОСТАНОВА - ЗАПИСЬ "0" В ОЗУ ОСТАНОВА!
;   ЗНАЧЕНИЕ РГ."КОП АРБИТРА" К МОМЕНТУ ЗАПИСИ В ОЗУ ОСТАНОВА Д.Б.ОПРЕДЕЛЕНО!
;   АДРЕС ОСТАНОВА ЗАДАЕТСЯ В БАЙТАХ ДАННЫХ БОПП В МЛ.РАЗРЯДАХ.
CJP А=PSSS0,МАР=РЕ,ALUS=ZА,RА=WR6,ALU,YDST=ADRREG
;
;===== СТИРАНИЕ АДРЕСА ПУЛЬТОВОГО ОСТАНОВА В ОЗУ ОСТАНОВА 0
;PROM:16ЕС
;   АДРЕС УСТРОЙСТВА: 001 6014 (01С0С)
;   АДРЕС В ПНА:      1 1 0 1 1 1 0 1 1 0 0 = 6ЕС Н
;   СТИРАНИЕ ОСТАНОВА - ЗАПИСЬ "1" В ОЗУ ОСТАНОВА!
;   ЗНАЧЕНИЕ РЕГИСТРА "КОП АРБИТРА" К МОМЕНТУ ЗАПИСИ В ПАМЯТЬ Д.Б.ОПРЕДЕЛЕНО!
;   АДРЕС "СТИРАНИЯ" ОСТАНОВА ЗАДАЕТСЯ В БАЙТАХ ДАННЫХ БОПП В МЛ.РАЗРЯДАХ.
CJP А=PSCS0,МАР=РЕ,ALUS=ZА,RА=WR6,ALU,YDST=ADRREG
;
;===== УСТАНОВКА ПУЛЬТОВОГО ОСТАНОВА В ОЗУ ОСТАНОВА 1
;PROM:16ED
;   АДРЕС УСТРОЙСТВА: 001 6015 (01C0D)
;   АДРЕС В ПНА:      1 1 0 1 1 1 0 1 1 0 1 = 6ED Н
;   УСТАНОВКА ОСТАНОВА - ЗАПИСЬ "0" В ОЗУ ОСТАНОВА!
;   ЗНАЧЕНИЕ РЕГИСТРА "КОП АРБИТРА" К МОМЕНТУ ЗАПИСИ В ПАМЯТЬ Д.Б.ОПРЕДЕЛЕНО!
;   АДРЕС ОСТАНОВА ЗАДАЕТСЯ В БАЙТАХ ДАННЫХ БОПП В МЛ.РАЗРЯДАХ.
CJP А=PSSS1,МАР=РЕ,ALUS=ZА,RА=WR6,ALU,YDST=ADRREG
;
;===== СТИРАНИЕ АДРЕСА ПУЛЬТОВОГО ОСТАНОВА В ОЗУ ОСТАНОВА 1
;PROM:16ЕЕ
;   АДРЕС УСТРОЙСТВА: 001 6016 (01С0Е)
;   АДРЕС В ПНА:      1 1 0 1 1 1 0 1 1 1 0 = 6ЕЕ Н
;   СТИРАНИЕ ОСТАНОВА - ЗАПИСЬ "1" В ОЗУ ОСТАНОВА!
;   ЗНАЧЕНИЕ РЕГИСТРА "КОП АРБИТРА" К МОМЕНТУ ЗАПИСИ В ПАМЯТЬ Д.Б.ОПРЕДЕЛЕНО!
;   АДРЕС "СТИРАНИЯ" ОСТАНОВА ЗАДАЕТСЯ В БАЙТАХ ДАННЫХ БОПП В МЛ.РАЗРЯДАХ.
CJP А=PSCS1,МАР=РЕ,ALUS=ZА,RА=WR6,ALU,YDST=ADRREG
;
;===== ЗАМЕНА ЛЕВОЙ КОМАНДЫ (32 СТАРШИХ РАЗРЯДА) В РГ.КОМАНД ПО ЗАПРОСУ ПП
;PROM:16EF
;   АДРЕС УСТРОЙСТВА: 001 6017 (01COF)
;   АДРЕС В ПНА:      1 1 0 1 1 1 0 1 1 1 1 = 6EF Н
;   ЗАМЕНЯЮЩАЯ КОМАНДА ЗАДАЕТСЯ В МЛАДШИХ 32 РАЗРЯДАХ БОПП!
;ЧИТАЕМ КОМАНДУ, ОБНУЛЯЕМ СТ.32 РАЗРЯДА
CJP А=PSILC,МАР=РЕ,ЕСА,ARA=RG1,ALUS=DА,RА=HALF,FUNC=AND,Н,ALUD=В,RВ=WR1
;
;===== ЗАМЕНА ПРАВОЙ КОМАНДЫ (32 МЛАДШИХ РАЗРЯДА) В РГ.КОМАНД ПО ЗАПРОСУ ПП
;PROM:16F0
;   АДРЕС УСТРОЙСТВА: 001 6020 (01С10)
;   АДРЕС В ПНА:      1 1 0 1 1 1 1 0 0 0 0 = 6F0 Н
;   ЗАМЕНЯЮЩАЯ КОМАНДА ЗАДАЕТСЯ В МЛАДШИХ 32 РАЗРЯДАХ БОПП!
;ЧИТАЕМ КОМАНДУ, ОБНУЛЯЕМ МЛ.32 РАЗРЯДА
CJP А=PSIRC,МАР=РЕ,ЕСА,ARA=RG1,ALUS=DZ,Н,ALUD=В,RВ=WR1
;
;===== ПУСК ЦП, НАЧИНАЯ С ЛК, ЗАПИСАННОЙ В РЕГИСТРЕ КОМАНД (ПО ЗАПРОСУ ПП)
;PROM:16F1
;   АДРЕС УСТРОЙСТВА: 001 6021 (01С11)
;   АДРЕС В ПНА:      1 1 0 1 1 1 1 0 0 0 1 = 6F1 Н
;   УСТАНАВЛИВАЕМ ТКК=ППК=ЛК, ПРОЧИЩАЕМ СТЕК СУАМ,
;   ЧИТАЕМ АК ЛК И ИДЕМ НА ИСПОЛНЕНИЕ КОМАНЫ (ПЕРЕХОД ПО ПНА КОП).
CJPP А=PSRUNL,МАР=РЕ,FFCNT=CLRTKK
;
;===== ПУСК ЦП, НАЧИНАЯ С ЛК ПО ЗАДАННОМУ АДРЕСУ (ПО ЗАПРОСУ ПП)
;PROM:16F2
;   АДРЕС УСТРОЙСТВА: 001 6022 (01С12)
;   АДРЕС В ПНА:      1 1 0 1 1 1 1 0 0 1 0 = 6F2 Н
;   УСТАНАВЛИВАЕМ ТКК=ППК=ЛК, ПРОЧИЩАЕМ СТЕК СУАМ, ПИШЕМ АДРЕС В РС И - НА ВКС!
CJPP А=PSRUNA,МАР=РЕ,FFCNT=CLRTKK
;
;===== УСТАНОВКА ПРОГРАММНОГО ПРЕРЫВАНИЯ ПО ЗАПРОСУ ПП
;PROM:16F3
;   АДРЕС УСТРОЙСТВА: 001 6023 (01С13)
;   АДРЕС В ПНА:      1 1 0 1 1 1 1 0 0 1 1 = 6F3 Н
;УСТАНАВЛИВАЕМ 41 РАЗРЯД ГРП, ЧТОБ ОТЛИЧИТЬ ОТ ПРЕРЫВАНИЙ ПО ТАЙМЕРУ СВ.
CJP А=PSPINT,МАР=РЕ,FFCNT=PRGINT
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В ЧАСЫ СЧЕТНОГО ВРЕМЕНИ
;PROM:16F4
;   АДРЕС УСТРОЙСТВА: 001 6024 (01С14)
;   АДРЕС В ПНА:      1 1 0 1 1 1 1 0 1 0 0 = 6F4 Н
;   ПРОВЕРЯЕМ МЛ.16 РАЗРЯДОВ:
;   ЕСЛИ = 0, ВЫЧИТАЕМ В17 ИЗ 64 РАЗРЯДОВ, В АППАРАТНУЮ ЧАСТЬ ПИШЕМ FFFF;
;   ЕСЛИ НЕ 0 - ПИШЕМ ЭТО В АППАРАТНУЮ ЧАСТЬ СВ;
CJP А=PSIT,МАР=РЕ,ALUS=DZ,Н,ALUD=ВА,RА=WR6,RВ=WR5,CEN,ALU,DSRC=SHIFT,MPS
>,PSHF=SН0-48,SHF=LOG
;
;===== ЗАПИСЬ ИЗ ПП (32 РАЗРЯДА) - В ТАЙМЕР СЧЕТНОГО ВРЕМЕНИ
;PROM:16F5
;   АДРЕС УСТРОЙСТВА: 001 6025 (01С15)
;   АДРЕС В ПНА:      1 1 0 1 1 1 1 0 1 0 1 = 6F5 Н
;   ПРОВЕРЯЕМ НА 0 32 И МЛ.16 РАЗРЯДОВ WR6 (СМ.ЗАПИСЬ ИЗ СУММАТОРА!)
CJP А=PSITT,МАР=РЕ,ALUS=ZА,RА=WR6,CEN
;
;===== УСТАНОВКА ВНЕШНЕГО ПРЕРЫВАНИЯ НА ШИНУ ПО ЗАПРОСУ ПП
;PROM:16F8
;   АДРЕС УСТРОЙСТВА: 001 6030 (01С18)
;   АДРЕС В ПНА:      1 1 0 1 1 1 1 1 0 0 0 = 6F8 Н
CJP А=OUTINP,МАР=РЕ,FFCNT=EXTINT
;
;===== СБРОС КЭША
;PROM:16F9
;   АДРЕС УСТРОЙСТВА: 001 6031 (01С19)
;   АДРЕС В ПНА:      1 1 0 1 1 1 1 1 0 0 1 = 6F9 Н
CRTN YDST=CCLR,FFCNT=SETEI
;
;     I====================================I
;     I  ВЫДАЧА РЕГИСТРОВ И ПАМЯТИ В  П П  I
;     I====================================I
;
;ОДИНАКОВОЕ С ВВОДОМ ПО ЗАПРОСУ ПП НАЧАЛО МИКРОПРОГРАММ:
;===== ВЫДАЧА ОЗУ МОДИФИКАТОРОВ (32 РАЗРЯДА) - В ПП
;===== ВЫДАЧА РЕГИСТРОВ ПРИПИСКИ (20 РАЗРЯДОВ) - В ПП
;===== ВЫДАЧА РЕГИСТРОВ БОБР,БИЗМ - В ПП (2,3 РАЗРЯДЫ)
;===== ВЫДАЧА БМСП - В ПП (1 РАЗРЯД)
;===== ВЫДАЧА ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 0 (12 РАЗРЯДОВ) - В ОЗУ ПП
;===== ВЫДАЧА ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 1 (12 РАЗРЯДОВ) - В ПП
;===== ВЫДАЧА КЭШ КОМАНД (64 РАЗРЯДА) - В ПП
;===== ВЫДАЧА КЭШ ОПЕРАНДОВ (64 РАЗРЯДА) - В ПП
;
;===== ВЫДАЧА РГ.А (64 РАЗРЯДА) - В ПП
;PROM:14С0
;   АДРЕС УСТРОЙСТВА: 001 4000 (01800)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 0 0 0 0 = 4С0 Н
JRP IСС,ALUS=ZА,RА=А,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.У (64 РАЗРЯДА) - В ПП
;PROM:14С1
;   АДРЕС УСТРОЙСТВА: 001 4001 (01801)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 0 0 0 1 = 4С1 Н
JRP IСС,ALUS=ZА,RА=У,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА ГРП (64 РАЗРЯДА) - В ПП
;PROM:14С2
;   АДРЕС УСТРОЙСТВА: 001 4002 (01802)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 0 0 1 0 = 4С2 Н
JRP IСС,ALUS=ZА,RА=INTR,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА СЧАС (32 РАЗРЯДА) - В ПП
;PROM:14С3
;   АДРЕС УСТРОЙСТВА: 001 4003 (01803)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 0 0 1 1 = 4С3 Н
JRP А=МН,IСС,DSRC=PROM,ALUS=DА,RА=РС,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РОП (32 РАЗРЯДА) - В ПП
;PROM:14С4
;   АДРЕС УСТРОЙСТВА: 001 4004 (01804)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 0 1 0 0 = 4С4 Н
JRP А=МН,IСС,DSRC=PROM,ALUS=DА,RА=РССОРУ,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА ИАОП (32 РАЗРЯДА) - В ПП
;PROM:14С5
;   АДРЕС УСТРОЙСТВА: 001 4005 (01805)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 0 1 0 1 = 4С5 Н
JRP А=МН,IСС,DSRC=PROM,ALUS=DА,RА=DADR,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.HALF (64 РАЗРЯДА) - В ПП
;PROM:14С6
;   АДРЕС УСТРОЙСТВА: 001 4006 (01806)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 0 1 1 0 = 4С6 Н
JRP IСС,ALUS=ZА,RА=HALF,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.ВУТЕ (64 РАЗРЯДА) - В ПП
;PROM:14С7
;   АДРЕС УСТРОЙСТВА: 001 4007 (01807)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 0 1 1 1 = 4С7 Н
JRP IСС,ALUS=ZА,RА=ВУТЕ,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.EXPN (64 РАЗРЯДА) - В ПП
;PROM:14С8
;   АДРЕС УСТРОЙСТВА: 001 4010 (01808)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 1 0 0 0 = 4С8 Н
JRP IСС,ALUS=ZА,RА=EXPN,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.MANT (64 РАЗРЯДА) - В ПП
;PROM:14С9
;   АДРЕС УСТРОЙСТВА: 001 4011 (01809)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 1 0 0 1 = 4С9 Н
JRP IСС,ALUS=ZА,RА=MANT,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.WR6 (64 РАЗРЯДА) - В ПП
;PROM:14СА
;   АДРЕС УСТРОЙСТВА: 001 4012 (0180А)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 1 0 1 0 = 4СА Н
JRP IСС
;
;===== ВЫДАЧА РГ.WR5 (64 РАЗРЯДА) - В ПП
;PROM:14СВ
;   АДРЕС УСТРОЙСТВА: 001 4013 (0180В)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 1 0 1 1 = 4СВ Н
JRP IСС,ALUS=ZА,RА=WR5,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.WR4 (64 РАЗРЯДА) - В ПП
;PROM:14СС
;   АДРЕС УСТРОЙСТВА: 001 4014 (0180С)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 1 1 0 0 = 4СС Н
JRP IСС,ALUS=ZА,RА=WR4,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧ РГ.WR3 (64 РАЗРЯДА) - В ПП
;PROM:14CD
;   АДРЕС УСТРОЙСТВА: 001 4015 (0180D)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 1 1 0 1 = 4CD Н
JRP IСС,ALUS=ZА,RА=WR3,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.WR2 (64 РАЗРЯДА) - В ПП
;PROM:14СЕ
;   АДРЕС УСТРОЙСТВА: 001 4016 (0180Е)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 1 1 1 0 = 4СЕ Н
JRP IСС,ALUS=ZА,RА=WR2,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.Q (64 РАЗРЯДА) - В ПП
;PROM:14CF
;   АДРЕС УСТРОЙСТВА: 001 4017 (0180F)
;   АДРЕС В ПНА:      1 0 0 1 1 0 0 1 1 1 1 = 4CF Н
JRP IСС,ALUS=ZQ,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧ РГ.ФИЗ.АДРЕСА ОЗУ: RG0 БОИ ДАННЫХ, 64 РАЗРЯДА - В ПП
;PROM:14D0
;   АДРЕС УСТРОЙСТВА: 001 4020 (01810)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 0 0 0 0 = 4D0 Н
JRP IСС,ЕСА,ARA=RG0,ALUS=DZ,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.КОМАНДЫ: RG1 БОИ ДАННЫХ, 64 РАЗРЯДА - В ПП
;PROM:14D1
;   АДРЕС УСТРОЙСТВА: 001 4021 (01811)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 0 0 0 1 = 4D1 Н
JRP IСС,ЕСА,ARA=RG1,ALUS=DZ,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.ОПЕРАНДА: RG2 БОИ ДАННЫХ, 64 РАЗРЯДА - В ПП
;PROM:14D2
;   АДРЕС УСТРОЙСТВА: 001 4022 (01812)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 0 0 1 0 = 4D2 Н
JRP IСС,ЕСА,ARA=RG2,ALUS=DZ,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.РЕЗУЛЬТАТА: RG3 БОИ ДАННЫХ, 64 РАЗРЯДА - В ПП
;PROM:14D3
;   АДРЕС УСТРОЙСТВА: 001 4023 (01813)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 0 0 1 1 = 4D3 Н
JRP IСС,ЕСА,ARA=RG3,ALUS=DZ,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.ТЕГА КОМАНДЫ: RG1 БОИ ТЕГА, 8 РАЗРЯДОВ - В ПП
;PROM:14D4
;   АДРЕС УСТРОЙСТВА: 001 4024 (01814)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 0 1 0 0 = 4D4 Н
JRP IСС,YDEVT=ECBTAG,BRA=RG1,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG
>,ALUS=DА,RА=ВУТЕ,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.ТЕГА ОПЕРАНДА: RG2 БОИ ТЕГА, 8 РАЗРЯДОВ - В ПП
;PROM:14D5
;   АДРЕС УСТРОЙСТВА: 001 4025 (01815)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 0 1 0 1 = 4D5 Н
JRP IСС,YDEVT=ECBTAG,BRA=RG2,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG
>,ALUS=DА,RА=ВУТЕ,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.ТЕГА РЕЗУЛЬТАТА: RG3 БОИ ТЕГА, 8 РАЗРЯДОВ - В ПП
;PROM:14D6
;   АДРЕС УСТРОЙСТВА: 001 4026 (01816)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 0 1 1 0 = 4D6 Н
JRP IСС,YDEVT=ECBTAG,BRA=RG3,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG
>,ALUS=DА,RА=ВУТЕ,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.ИСПОЛНИТЕЛЬНОГО АДРЕСА (20 РАЗРЯДОВ) - В ПП
;PROM:14D7
;   АДРЕС УСТРОЙСТВА: 001 4027 (01817)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 0 1 1 1 = 4D7 Н
CJP А=PSOADR,МАР=РЕ,YDEV=RADRR,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG,ALUS=DZ
>,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.НОМЕРА ГРУППЫ (6-11 РАЗРЯДЫ) - В ПП
;PROM:14D8
;   АДРЕС УСТРОЙСТВА: 4030 (01818)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 1 0 0 0 = 4D8 Н
CJP А=PSOMGN,МАР=РЕ,DSRC=MODGN,ALUS=DZ,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.НОМЕРА ПРОЦЕССА (8 РАЗРЯДОВ) - В ПП
;PROM:14D9
;   АДРЕС УСТРОЙСТВА: 001 4031 (01819)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 1 0 0 1 = 4D9 Н
JRP IСС,DSRC=PROCN,ALUS=DА,RА=ВУТЕ,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.ФИЗИЧЕСКОЙ СТРАНИЦЫ (РФС), 11-20 РАЗРЯДЫ - В ПП
;PROM:14DA
;   АДРЕС УСТРОЙСТВА: 001 4032 (0181А)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 1 0 1 0 = 4DA Н
CJP А=PSOPHP,МАР=РЕ,DSRC=PHYSPG,ALUS=DZ,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ/ТГ ПРИЗНАКОВ (БЕЗ ЧТЕНИЯ РР И М), 32 РАЗРЯДА - В ПП
;PROM:14DB
;   АДРЕС УСТРОЙСТВА: 001 4033 (0181В)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 1 0 1 1 = 4DB Н
CJP А=PSOCNT,МАР=РЕ,DSRC=CNT,ALUS=DZ,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.КОП АРБИТРА, 4 РАЗРЯДА - В ПП
;PROM:14DD
;   АДРЕС УСТРОЙСТВА: 001 4035 (0181D)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 1 1 0 1 = 4DD Н
CJP А=PSOARB,МАР=РЕ,DSRC=ARBOPC,ALUS=DZ,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.N СУСС (7-10 РАЗРЯДЫ) - В ПП
;PROM:14DE
;   АДРЕС УСТРОЙСТВА: 001 4036 (0181Е)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 1 1 1 0 = 4DE Н
CJP А=PSOIND,МАР=РЕ,SТОРС=20,DDEV=STATUS,ALUS=DZ,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.М СУСС (7-10 РАЗРЯДЫ) - В ПП
;PROM:14DF
;   АДРЕС УСТРОЙСТВА: 001 4037 (0181F)
;   АДРЕС В ПНА:      1 0 0 1 1 0 1 1 1 1 1 = 4DF Н
CJP А=PSOIND,МАР=РЕ,SТОРС=32,DDEV=STATUS,ALUS=DZ,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РЕЗУЛЬТАТА ПОИСКА ЛЕВОЙ ЕДИНИЦЫ СУММАТОРА (7 РАЗРЯДОВ) - В ПП
;PROM:14Е5
;   АДРЕС УСТРОЙСТВА: 001 6005 (01С05)
;   АДРЕС В ПНА:      1 0 0 1 1 1 0 0 1 0 1 = 4Е5 Н
CJP А=PSOLOS,МАР=РЕ,ALUS=DZ,Н,ALUD=ВА,RА=А,RВ=WR6,ALU,DSRC=LOS
;
;===== ВЫДАЧА РЕЗУЛЬТАТА СДВИГА СУММАТОРА НА ЧИСЛО РАЗРЯДОВ, ЗАДАННОЕ В РПС
;PROM:14Е7
;   АДРЕС УСТРОЙСТВА: 001 6007 (01С07)
;   АДРЕС В ПНА:      1 0 0 1 1 1 0 0 1 1 1 = 4Е7 Н
;СДВИГ - ЛОГИЧЕСКИЙ, РЕЗ-Т - 64 РАЗРЯДА В РГ.WR6
JRP IСС,ALUS=DZ,Н,ALUD=ВА,RА=А,RВ=WR6,ALU,DSRC=SHIFT,SHF=LOG
;
;===== ВЫДАЧА КОП КОМАНДЫ (8 РАЗРЯДОВ) - В ПП
;PROM:14Е8
;   АДРЕС УСТРОЙСТВА: 001 6010 (01С08)
;   АДРЕС В ПНА:      1 0 0 1 1 1 0 1 0 0 0 = 4Е8 Н
JRP IСС,DSRC=ОРС,ALUS=DА,RА=ВУТЕ,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА АДРЕСНОЙ ЧАСТИ КОМАНДЫ (32 РАЗРЯДА) - В ПП
;PROM:14Е9
;   АДРЕС УСТРОЙСТВА: 001 6011 (01С09)
;   АДРЕС В ПНА:      1 0 0 1 1 1 0 1 0 0 1 = 4Е9 Н
JRP IСС,DSRC=СОМА,ALUS=DА,RА=HALF,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА ЧАСОВ СЧЕТНОГО ВРЕМЕНИ (64 РАЗРЯДА) - В ПП
;PROM:14F4
;   АДРЕС УСТРОЙСТВА: 001 6024 (01С14)
;   АДРЕС В ПНА:      1 0 0 1 1 1 1 0 1 0 0 = 4F4 Н
;   ЧИТАЕМ СТАРОЕ ЗНАЧЕНИЕ ЧАСОВ СВ (64 РАЗРЯДА) - ИЗ ОЗУ МОД.
;   ЧИТАЕМ МЛ.16Р.(СКОЛЬКО "НАТИКАЛО") ИЗ АППАРАТНЫХ ЧАСОВ СЧЕТНОГО ВРЕМЕНИ,
;   ОБ'ЕДИНЯЕМ ИХ, ПЕРЕДАЕМ ЭТО ЗНАЧЕНИЕ В ПП. МАСКА Д.БЫТЬ!
;ЧИТАЕМ ИЗ ОЗУ МОД.
CJP А=PSOT,МАР=РЕ,CSM,MNSA=МР,MODNM=CTR,ALUS=DА,RА=HALF,FUNC=AND,Н,ALUD=Q
;
;===== ВЫДАЧА ТАЙМЕРА СЧЕТНОГО ВРЕМЕНИ (32 РАЗРЯДА) - В ПП
;PROM:14F5
;   АДРЕС УСТРОЙСТВА: 001 6025 (01С15)
;   АДРЕС В ПНА:      1 0 0 1 1 1 1 0 1 0 1 = 4F5 Н
;   ЧИТАЕМ СТАРШИЕ 17-32 РАЗРЯДА - ИЗ ОЗУ МОД.
;   МЛАДШИЕ 16 РАЗРЯДОВ - ИЗ АППАРАТНОГО ТАЙМЕРА СЧЕТНОГО ВРЕМЕНИ
;   МАСКА УСТАНОВЛЕНА!
;"ДЕЛАЕМ" 0000 0000 FFFF 0000, НЕ ЗАНИМАЯ ПОЛЕ АДРЕСА!
CJP А=PSOTT,МАР=РЕ,ALUS=DА,RА=HALF,FUNC=AND,Н,ALUD=ВА,RВ=WR6,ALU,DSRC=SHIFT
>,MPS,PSHF=SН0-16,SHF=LOG
;
;===== ЧТЕНИЕ НОМЕРА ПРОЦЕССОРА В ПП
;PROM:14FA
;   АДРЕС УСТРОЙСТВА: 001 6032 (01С1А)
;   АДРЕС В ПНА:      1 0 0 1 1 1 1 1 0 1 0 = 4FA Н
JRP А=CPN,IСС,DSRC=PROM,ALUS=DZ,Н,ALUD=В,RВ=WR6
;
;     I===================================I
;     I  ДОБАВЛЯЕМ, ЧТО ЕЩЕ ПОНАДОБИЛОСЬ  I
;     I===================================I
;
;===== ЗАПИСЬ СУММАТОРА (32 РАЗРЯДА) - В РОП
;PROM:12С4
;   АДРЕС 001 4004 (01804)
;   СЛ.1 СЛ.0  АИСП.: 14 13 12 11   5  4  3  2  1
;     0    1           0  1  1  0   0  0  1  0  0  =  2С4 Н
JRP %М%,ALUS=ZА,RА=А,ALUD=В,RВ=РССОРУ
;
;===== ЧТЕНИЕ РОП (32 РАЗРЯДА) - В СУММАТОР
;PROM:10С4
;   АДРЕС 001 4004 (01804)
;   СЛ.1 СЛ.0 АИСП.: 14 13 12 11   5  4  3  2  1
;     0    0          0  1  1  0   0  0  1  0  0  =  0С4 Н
JRP А=МН,%М%,DSRC=PROM,ALUS=DА,RА=РССОРУ,FUNC=AND,Н,ALUD=В,RВ=А,СЕМ
END
PSRWIO:PROG;
;===== ОБМЕН МЕЖДУ РЕГИСТРАМИ ЦП И СУММАТОРОМ ИЛИ ПП
;
;     I===========================================I
;     I  ЗАПИСЬ В РЕГИСТРЫ И ПАМЯТЬ ИЗ СУММАТОРА  I
;     I===========================================I
;
EXTERNAL CTWR,CTTWR,CTRD,CTTRD,LCW,LCWPH,JIQ,LCWISE
;===== ЗАПИСЬ СУММАТОРА В ОЗУ МОДИФИКАТОРОВ (32 РАЗРЯДА)
WMODIF:ENTRY
;АИСП.- В РНГ
CONT YDEV=RADRR,YDST=MODGN
;ПИШЕМ СУММАТОР В ОЗУ МОД.
CONT ALUS=ZА,RА=А,ALU,CSM,WЕМ,MNSA=U,MOD
;ВОССТАНАВЛИВАЕМ РНГ
JRP %М%,ALUS=ZА,RА=WR3,ALU,YDST=MODGN
;
;===== ЗАПИСЬ СУММАТОРА В РЕГИСТРЫ ПРИПИСКИ (20 РАЗРЯДОВ)
WPSMEM:ENTRY
;АДРЕС - В АИСП.
CONT ALUS=ZА,RА=WR3,ALU,YDST=ADRREG
;ПИШЕМ СУММАТОР В РЕГИСТРЫ ПРИПИСКИ
JRP %М%,ALUS=ZА,RА=А,ALU,YDEV=PSMEM,WRY
;
;===== ЗАПИСЬ СУММАТОРА (2,3 РАЗРЯДЫ) - В РЕГИСТРЫ БОБР,БИЗМ
WВВ:ENTRY
;АДРЕС - В РФС
CONT ALUS=ZА,RА=WR3,ALU,YDST=PHYSPG,DDEV=CLRCD
;ПИШЕМ СУММАТОР В БОБР,БИЗМ С ШИНЫ D!
JRP %MED%,ALUS=ZА,RА=А,ALU,%TRSH%,DDEV=ВВ,WRD
;
;===== ЗАПИСЬ СУММАТОРА (1 РАЗРЯД) - В РЕГИСТРЫ БМСП
WMODB:ENTRY
;АДРЕС - В РФС
CONT ALUS=ZА,RА=WR3,ALU,YDST=PHYSPG,DDEV=CLRCD
;ПИШЕМ СУММАТОР В БМСП С ШИНЫ D!
JRP %MED%,ALUS=ZА,RА=А,ALU,%TRSH%,DDEV=MODB,WRD
;
;===== ЗАПИСЬ СУММАТОРА (10 РАЗРЯДОВ) - В ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 0
WРРМ0:ENTRY
;АДРЕС - В РФС
CONT ALUS=ZА,RА=WR3,ALU,YDST=PHYSPG,DDEV=CLRCD
;ПИШЕМ СУММАТОР В ОЗУ ПС0
JRP %MED%,ALUS=ZА,RА=А,ALU,DDEV=РРМЕМ0
>,WRD
;
;===== ЗАПИСЬ СУММАТОРА (10 РАЗРЯДОВ) - В ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 1
WРРМ1:ENTRY
;АДРЕС - В РФС
CONT ALUS=ZА,RА=WR3,ALU,YDST=PHYSPG,DDEV=CLRCD,WRD
;ПИШЕМ СУММАТОР В ОЗУ ПС1
JRP %MED%,ALUS=ZА,RА=А,ALU,DDEV=РРМЕМ1
>,WRD
;
;===== ЗАПИСЬ СУММАТОРА (8Р.) - В РГ.ТЕГА РЕЗУЛЬТАТА И В РРР, МЛ.БАЙТ
PSWRT3:ENTRY
CONT А=MNB,DSRC=PROM,ALUS=DА,RА=WR3,FUNC=AND,ALUD=В,RВ=WR3
;НА ВСЯКИЙ СЛУЧАЙ У СУММАТОРА ОСТАВЛЯЕМ ТОЛЬКО 8 РАЗРЯДОВ
CONT А=МВ,DSRC=PROM,ALUS=DА,RА=А,FUNC=AND,ALUD=В,RВ=WR4
JRP %М%,ALUS=АВ,RА=WR3,RВ=WR4,FUNC=OR,ALU,YDEVT=ECBTAG,WRB
>,BRA=RG3,CSM,WЕМ,MNSA=МР,MODNM=RRR
;
;===== ЗАПИСЬ СУММАТОРА (16 РАЗРЯДОВ) - В РГ.ОЗУ ЦП->ПП + УСТ.ПРИЗНАКА
PSWMP:ENTRY
CJP А=PSWMP,МАР=РЕ,COND=СРМР,IСС
CONT ALUS=ZА,RА=А,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=INFB1
CONT YDEV=МРМЕМ,IОМР,MPADR=FСР,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG
>,ALUS=DZ,Н,ALUD=В,RВ=WR6
CONT А=В8,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=OR,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=FСР
;FFCNT=LDCPMP(29) - УСТАНАВЛИВАЕТ ПРИЗНАК, ЧТО "ОЗУ ЦП->ПП" ЗАНЯТО!
JRP %М%,FFCNT=LDCPMP
;
;===== ЗАПРОС НА КОРРЕКТИРОВКУ СПИСКОВ ПРИОРИТЕТОВ СТРАНИЦ
PSWCOR:ENTRY
;ЗАПИСЫВАЕМ "ВРУЧНУЮ" "1" В ОЗУ БМСП ПО АДРЕСУ РФС, ЧТОБ НАВЕРНЯКА
CONT А=С1,DSRC=PROM,DDEV=MODB,WRD
;ЗАПУСКАЕМ ЗАГРУЗКУ
CONT FFCNT=STRTLD
;ЖДЕМ КОНЦА ЗАГРУЗКИ
WELLD:CJP А=WELLD,МАР=РЕ,COND=FULMEM,IСС
CONT А=В11,DSRC=PROM,ALUS=DZ,ALU,YDST=PHYSPG,DDEV=CLRCD,WRD
;ЗАПИСЫВАЕМ "0" В ОЗУ ПС0
JRP %MED%,ALUS=ZА,FUNC=AND,ALU,DDEV=РРМЕМ0
>,WRD
;
;===== ЗАПИСЬ СУММАТОРА (64 РАЗРЯДА) - В ЧАСЫ СЧЕТНОГО ВРЕМЕНИ (СВОИ!)
PSWT:ENTRY
CJP А=NZ16,МАР=РЕ,COND=СТ,SТОРС=/NZ,ALUS=ZА,RА=А,Н,ALUD=В,RВ=WR5,ALU,CSM
>,WЕМ,MNSA=МР,MODNM=CTR,ЕСВ,WRB,BRA=RG3
CONT А=В17,DSRC=PROM,ALUS=DА,RА=А,FUNC=SUBR,Н,CI,ALU,CSM,WЕМ,MNSA=МР,MODNM=CTR
>,ЕСВ,WRB,BRA=RG3
CONT ALUS=ZА,RА=HALF,ALUD=В,RВ=WR5
NZ16:CJS А=CTWR,МАР=РЕ,ЕСВ,BRA=RG3,DSRC=SHIFT,MPS,PSHF=SН0+32,SHF=LOG
>,ALUS=DZ,Н,ALUD=В,RВ=WR1
JRP %М%,ALUS=ZА,RА=WR1,ALU,CSM,WЕМ,MNSA=МР,MODNM=CTL,FFCNT=SETEI
;
;===== ЗАПИСЬ СУММАТОРА (32 РАЗРЯДА) - В ТАЙМЕР СЧЕТНОГО ВРЕМЕНИ (В СВОЙ!)
PSWTT:ENTRY
CJP А=PROGW,МАР=РЕ,COND=СТ,SТОРС=NZ,ALUS=ZА,RА=А,ALUD=В,RВ=WR5,ALU,CSM,WЕМ
>,MNSA=МР,MODNM=СТТ
CONT А=MQ,DSRC=PROM,ALUS=DА,RА=А,FUNC=AND,CEN
CJP А=АТСТ,МАР=РЕ,COND=СТ,SТОРС=/NZ
CONT А=В17,DSRC=PROM,ALUS=DА,RА=А,FUNC=SUBR,CI,ALU,CSM,WЕМ,MNSA=МР,MODNM=СТТ
CJP А=АТСТ,МАР=РЕ,ALUS=ZА,RА=HALF,ALUD=В,RВ=WR5
;ТАЙМЕР = 0: В40 -> В ГРП + ПРОГРАММНОЕ ПРЕРЫВАНИЕ
PROGW:CONT А=В40,DSRC=PROM,ALUS=DА,RА=INTR,FUNC=OR,Н,ALUD=В,RВ=INTR,FFCNT=PRGINT
CONT ALUS=ZA,RA=HALF,ALUD=B,RB=WR5,ALU,CSM,WEM,MNSA=MP,MODNM=CTT
АТСТ:CJS А=CTTWR,МАР=РЕ,FFCNT=CLREI
JRP %М%,FFCNT=SETEI
;
;     I========================================I
;     I  ЧТЕНИЕ РЕГИСТРОВ И ПАМЯТИ В СУММАТОР  I
;     I========================================I
;
;===== ЧТЕНИЕ ИЗ ОЗУ МОДИФИКАТОРОВ В СУММАТОР (32 РАЗРЯДА)
RMODIF:ENTRY
;АИСП.- В РНГ
CONT YDEV=RADRR,YDST=MODGN
;ЧИТАЕМ ОЗУ МОД.- В СУММАТОР
CONT CSM,MNSA=U,MOD,ALUS=DА,RА=HALF,FUNC=AND,Н,ALUD=В,RВ=А,СЕМ
;ВОССТАНАВЛИВАЕМ РНГ
JRP %М%,ALUS=ZА,RА=WR3,ALU,YDST=MODGN
;
;===== ЧТЕНИЕ РЕГИСТРОВ ПРИПИСКИ В СУММАТОР (20 РАЗРЯДОВ)
RPSMEM:ENTRY
;АДРЕС - В АИСП; ЧИТАЕМ МАСКУ НА 20 РАЗРЯДОВ
CONT А=MADR,DSRC=PROM,ALUS=DZ,Н,ALUD=ВА,RА=WR3,RВ=WR2,ALU,YDST=ADRREG
;ЧИТАЕМ РЕГИСТРЫ ПРИПИСКИ В СУММАТОР
JRP %М%,YDEV=PSMEM,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG,ALUS=DА,RА=WR2
>,FUNC=AND,Н,ALUD=В,RВ=А,СЕМ
;
;===== ЧТЕНИЕ РЕГИСТРОВ БОБР,БИЗМ (2,3 РАЗРЯДЫ) - В СУММАТОР
RВВ:ENTRY
;АДРЕС - В РФС, МАСКУ НА 2,3 АЗРЯДЫ - В WR2
CONT А=С6,DSRC=PROM,ALUS=DZ,Н,ALUD=ВА,RА=WR3,RВ=WR2,ALU,YDST=PHYSPG
>,DDEV=CLRCD,WRD
;ЧИТАЕМ БОБР,БИЗМ В СУММАТОР
JRP %MED%,DDEV=ВВ,ALUS=DА,RА=WR2,FUNC=AND,Н
>,ALUD=В,RВ=А,СЕМ
;
;===== ЧТЕНИЕ РЕГИСТРОВ БМСП (1 РАЗРЯД) - В СУММАТОР
RMODB:ENTRY
;АДРЕС - В РФС
CONT А=С1,DSRC=PROM,ALUS=DZ,Н,ALUD=ВА,RА=WR3,RВ=WR2,ALU,YDST=PHYSPG
>,DDEV=CLRCD,WRD
;ЧИТАЕМ БМСП В СУММАТОР
JRP %MED%,DDEV=MODB,ALUS=DА,RА=WR2,FUNC=AND,Н
>,ALUD=В,RВ=А,СЕМ
;
;===== ЧТЕНИЕ ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 0 (10 РАЗРЯДОВ) - В СУММАТОР
RРРМ0:ENTRY
;АДРЕС - В РФС
CONT А=MPG,DSRC=PROM,ALUS=DZ,Н,ALUD=ВА,RА=WR3,RВ=WR2,ALU,YDST=PHYSPG
>,DDEV=CLRCD,WRD
;ЧИТАЕМ ОЗУ ПС0 В СУММАТОР
JRP %MED%,DDEV=РРМЕМ0,ALUS=DА,RА=WR2,FUNC=AND,Н
>,ALUD=В,RВ=А,СЕМ
;
;===== ЧТЕНИЕ ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 1 (10 РАЗРЯДОВ) - В СУММАТОР
RРРМ1:ENTRY
;АДРЕС - В РФС
CONT А=MPG,DSRC=PROM,ALUS=DZ,Н,ALUD=ВА,RА=WR3,RВ=WR2,ALU,YDST=PHYSPG
>,DDEV=CLRCD,WRD
;ЧИТАЕМ ОЗУ ПС1 В СУММАТОР
JRP %MED%,DDEV=РРМЕМ1,ALUS=DА,RА=WR2,FUNC=AND,Н
>,ALUD=В,RВ=А,СЕМ
;
;===== ЧТЕНИЕ РГ.НОМЕРА ГРУППЫ (6-10 РАЗРЯДЫ) - В СУММАТОР
PSRMGN:ENTRY
CONT А=MGN5,DSRC=PROM,ALUS=DZ,Н,ALUD=В,RВ=WR3
JRP %М%,DSRC=MODGN,ALUS=DА,RА=WR3,FUNC=AND,Н,ALUD=В,RВ=А,СЕМ
;
;===== ЧТЕНИЕ ЧАСОВ СЧЕТНОГО ВРЕМЕНИ (64 РАЗРЯДА) - В СУММАТОР
PSRT:ENTRY
;ЧИТАЕМ ИЗ ОЗУ МОД.СТАРШИЕ 32 РАЗРЯДА, ДОБАВЛЯЕМ АППАРАТНУЮ ЧАСТЬ
CONT CSM,MNSA=МР,MODNM=CTL,ЕСА,WRA,ARA=RG3
CJS А=CTRD,МАР=РЕ,ЕСВ,BRA=RG3,DSRC=SHIFT,MPS,PSHF=SН0-32,SHF=LOG,ALUS=DА
>,RА=WR1,FUNC=OR,Н,ALUD=В,RВ=WR1
CONT А=MNQ,DSRC=PROM,ALUS=DА,RА=WR1,FUNC=AND,Н,ALUD=В,RВ=А
JRP %М%,ALUS=АВ,RА=WR5,RВ=А,FUNC=OR,Н,ALUD=В,СЕМ,FFCNT=SETEI
;
;===== ЧТЕНИЕ ТАЙМЕРА СЧЕТНОГО ВРЕМЕНИ (32 РАЗРЯДА) - В СУММАТОР
PSRTT:ENTRY
CJS А=CTTRD,МАР=РЕ,CSM,MNSA=МР,MODNM=СТТ,ALUS=DА,RА=А,FUNC=AND,Н,ALUD=В,RВ=А
JRP %М%,ALUS=АВ,RА=WR5,RВ=А,FUNC=OR,Н,ALUD=В,СЕМ,FFCNT=SETEI
;
;===== ПРОВЕРКА СОСТОЯНИЯ ОЗУ ОБМЕНА ЦП->ПП: С=1, ЕСЛИ ЗАНЯТО
PSRCMP:ENTRY
CJP А=SWCP,МАР=РЕ,COND=СРМР,SТОРС=MCN,CEN,СЕМ
;ЗАНЯТО: С=1
CJP А=WМСР,МАР=РЕ,SТОРС=SETNC,CEN
;СВОБОДНО: С=0
SWCP:CONT SТОРС=CLRNC,CEN
WМСР:JRP %М%,SТОРС=MCN,CEN,СЕМ
;
;     I======================================I
;     I  ЗАПИСЬ В РЕГИСТРЫ И ПАМЯТЬ ИЗ  П П  I
;     I======================================I
;
;===== ОБМЕН МЕЖДУ ПП И ОЗУ МОДИФИКАТОРОВ (32 РАЗРЯДА)
MMODIF:ENTRY
;АИСП.- В РНГ, ПЕРЕХОД, ЕСЛИ ЧТЕНИЕ ОЗУ МОД.
CJP А=OMODIF,МАР=РЕ,COND=СТ,SТОРС=/NZ,YDEV=RADRR,YDST=MODGN
;ПИШЕМ WR6 В ОЗУ МОД.
CONT ALUS=ZА,RА=WR6,ALU,CSM,WЕМ,MNSA=U,MOD
;ВОССТАНАВЛИВАЕМ РНГ, РАЗРЕШАЕМ ПРЕРЫВАНИЯ; ВОЗВРАТ
CRTN ALUS=ZА,RА=WR3,ALU,YDST=MODGN,FFCNT=SETEI
;
;ЧИТАЕМ ОЗУ МОД.- В WR6
OMODIF:CONT CSM,MNSA=U,MOD,ALUS=DА,RА=HALF,FUNC=AND,Н,ALUD=В,RВ=WR6
;ВОССТАНАВЛИВАЕМ РНГ, ИДЕМ НА ЗАПИСЬ РГ.WR6 В БОПП;
;А ТАМ УЖЕ - СБРОС МАСКИ, УСТАНОВКА ТГ.,ЧТО ЗАПИСАЛИ ИНФОРМАЦИЮ, И ВОЗВРАТ.
JRP IСС,ALUS=ZА,RА=WR3,ALU,YDST=MODGN
;
;===== ОБМЕН МЕЖДУ ПП И РЕГИСТРАМИ ПРИПИСКИ (20 РАЗРЯДОВ)
MPSMEM:ENTRY
;АДРЕС - В АИСП., ПЕРЕХОД, ЕСЛИ ЧТЕНИЕ РЕГИСТРОВ
CJP А=OPSMEM,МАР=РЕ,COND=СТ,SТОРС=/NZ,ALUS=ZА,RА=WR3,ALU,YDST=ADRREG
;ПИШЕМ В РЕГИСТРЫ ПРИПИСКИ
CRTN ALUS=ZА,RА=WR6,ALU,YDEV=PSMEM,WRY,FFCNT=SETEI
;
;ЧИТАЕМ РЕГИСТРЫ ПРИПИСКИ, УБИРАЕМ МУСОР
OPSMEM:CONT А=MADR,DSRC=PROM,ALUS=DZ,Н,ALUD=В,RВ=WR6
JRP IСС,YDEV=PSMEM,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG,ALUS=DА,RА=WR6,FUNC=AND
>,Н,ALUD=В,RВ=WR6
;
;===== ОБМЕН МЕЖДУ ПП  И РЕГИСТРАМИ БОБР,БИЗМ (2,3 РАЗРЯДЫ)
МВВ:ENTRY
;АДРЕС - В РФС
CJP А=ОВВ,МАР=РЕ,COND=СТ,SТОРС=/NZ,ALUS=ZА,RА=WR3,ALU,YDST=PHYSPG
;ПИШЕМ В БОБР,БИЗМ С ШИНЫ D!
CRTN ALUS=ZА,RА=WR6,ALU,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG,DDEV=ВВ,WRD,FFCNT=SETEI
;
;ЧИТАЕМ БОБР,БИЗМ
ОВВ:CONT А=С6,DSRC=PROM,ALUS=DZ,Н,ALUD=ВА,RА=WR3,RВ=WR6,ALU,YDST=PHYSPG
JRP IСС,DDEV=ВВ,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ОБМЕН МЕЖДУ ПП И РЕГИСТРАМИ БМСП (1 РАЗРЯД)
MMODB:ENTRY
;АДРЕС - В РФС
CJP А=OMODB,МАР=РЕ,COND=СТ,SТОРС=/NZ,ALUS=ZА,RА=WR3,ALU,YDST=PHYSPG
;ПИШЕМ БМСП С ШИНЫ D!
CRTN ALUS=ZА,RА=WR6,ALU,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG,DDEV=MODB,WRD
>,FFCNT=SETEI
;
;ЧИТАЕМ БМСП
OMODB:CONT А=С1,DSRC=PROM,ALUS=DZ,Н,ALUD=В,RВ=WR6
JRP IСС,DDEV=MODB,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ОБМЕН МЕЖДУ ПП И ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 0 (10 РАЗРЯДОВ)
МРРМ0:ENTRY
;АДРЕС - В РФС
CJP А=ОРРМ0,МАР=РЕ,COND=СТ,SТОРС=/NZ,ALUS=ZА,RА=WR3,ALU,YDST=PHYSPG
;ПИШЕМ В ОЗУ ПС0
CRTN ALUS=ZА,RА=WR6,ALU,DDEV=РРМЕМ0,WRD,FFCNT=SETEI
;
;ЧИТАЕМ ОЗУ ПС0
ОРРМ0:CONT А=MPG,DSRC=PROM,ALUS=DZ,Н,ALUD=В,RВ=WR6
JRP IСС,DDEV=РРМЕМ0,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ОБМЕН МЕЖДУ ПП И ОЗУ ПРИОРИТЕТОВ СТРАНИЦ 1 (10 РАЗРЯДОВ)
МРРМ1:ENTRY
;АДРЕС - В РФС
CJP А=ОРРМ1,МАР=РЕ,COND=СТ,SТОРС=/NZ,ALUS=ZА,RА=WR3,ALU,YDST=PHYSPG
;ПИШЕМ В ОЗУ ПС1
CRTN ALUS=ZА,RА=WR6,ALU,DDEV=РРМЕМ1,WRD,FFCNT=SETEI
;
;ЧИТАЕМ ОЗУ ПС1
ОРРМ1:CONT А=MPG,DSRC=PROM,ALUS=DZ,Н,ALUD=В,RВ=WR6
JRP IСС,DDEV=РРМЕМ1,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ОБМЕН МЕЖДУ ПП И КЭШ КОМАНД (64 РАЗРЯДА)
МСС:ENTRY
;СДВИГАЕМ N СТРАНИЦЫ В 11-20 РАЗРЯДЫ С РАЗМНОЖЕНИЕМ ЗНАКА
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR2,RВ=WR2,ALU,DSRC=SHIFT,MPS,PSHF=SН0+44,SHF=ARIPH
;УБИРАЕМ МУСОР В МЛ.10 РАЗРЯДАХ
CONT А=MWN,DSRC=PROM,ALUS=DА,RА=WR2,FUNC=NOTRS,Н,ALUD=В,RВ=WR2
;НОМЕР СЛОВА В СТРАНИЦЕ - В 1-10 РАЗРЯДАХ
CONT А=MWN,DSRC=PROM,ALUS=DА,RА=WR1,FUNC=AND,ALUD=В,RВ=WR1
;ОБ'ЕДИНЯЕМ; П/У, ЕСЛИ ЧТЕНИЕ
CJP А=ОСС,МАР=РЕ,COND=СТ,SТОРС=/NZ,ALUS=АВ,RА=WR2,RВ=WR1,FUNC=OR,ALUD=В
>,ALU,YDST=ADRREG
;ДАННЫЕ ИЗ ПП - В RG1 БОИ ДАННЫХ
CONT ALUS=ZА,RА=WR6,Н,ALU,ЕСВ,WRB,BRA=RG1
;ПИШЕМ В КЭШ КОМАНД (В RG0 ПИШЕМ ТОЛЬКО ДЛЯ КОНТРОЛЯ!)
CONT YDEV=PHYSAD,ЕСВ,WRB,BRA=RG0,ARBI=CCWR
WAI:CJP А=WAI,МАР=РЕ,COND=ARBRDY,IСС
CRTN FFCNT=SETEI
;
;ЧИТАЕМ КЭШ КОМАНД
ОСС:CONT YDEV=PHYSAD,ЕСВ,WRB,BRA=RG0,ARBI=CCRD
WАО:CJP А=WАО,МАР=РЕ,COND=ARBRDY,IСС
JRP IСС,ЕСА,ARA=RG1,ALUS=DZ,Н,ALUD=В,RВ=WR6
;
;===== ОБМЕН МЕЖДУ ПП И КЭШ ОПЕРАНДОВ (64 РАЗРЯДА)
MDC:ENTRY
;СДВИГАЕМ N СТРАНИЦЫ В 11-20 РАЗРЯДЫ С РАЗМНОЖЕНИЕМ ЗНАКА
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR2,RВ=WR2,ALU,DSRC=SHIFT,MPS,PSHF=SН0+44,SHF=ARIPH
;УБИРАЕМ МУСОР
CONT А=MWN,DSRC=PROM,ALUS=DА,RА=WR2,FUNC=NOTRS,Н,ALUD=В,RВ=WR2
;АДРЕС СЛОВА В СТРАНИЦЕ
CONT А=MWN,DSRC=PROM,ALUS=DА,RА=WR1,FUNC=AND,ALUD=В,RВ=WR1
CJP А=ODC,МАР=РЕ,COND=СТ,SТОРС=/NZ,ALUS=АВ,RА=WR1,RВ=WR2,FUNC=OR,ALUD=В
>,ALU,YDST=ADRREG
;ЧИСЛО ИЗ ПП - В RG3 БОИ ДАННЫХ
CONT ALUS=ZА,RА=WR6,Н,ALU,ЕСВ,WRB,BRA=RG3
;ПИШЕМ В КЭШ ОПЕРАНДОВ (В RG0 ПИШЕМ ТОЛЬКО ДЛЯ КОНТРОЛЯ!)
CONT YDEV=PHYSAD,ЕСВ,WRB,BRA=RG0,ARBI=DCWR
WAID:CJP А=WAID,%WА%
OUTINP:ENTRY
CRTN FFCNT=SETEI
;
;ЧИТАЕМ КЭШ ОПЕРАНДОВ
ODC:CONT YDEV=PHYSAD,ЕСВ,WRB,BRA=RG0,ARBI=DCRD
WAOD:CJP А=WAOD,%WА%
JRP IСС,ЕСА,ARA=RG2,ALUS=DZ,Н,ALUD=В,RВ=WR6
;
;===== ЗАПИСЬ ИЗ ПП (8Р.) - В РГ.ТЕГА РЕЗУЛЬТАТА (RG3) И РРР (МЛ.БАЙТ)
PSIRT3:ENTRY
CONT А=MNB,DSRC=PROM,ALUS=DА,RА=WR3,FUNC=AND,ALUD=В,RВ=WR3
CONT А=МВ,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=AND,ALUD=В,RВ=WR4
CRTN ALUS=АВ,RА=WR3,RВ=WR4,FUNC=OR,ALU,YDEVT=ECBTAG,WRB,BRA=RG3,CSM
>,WЕМ,MNSA=МР,MODNM=RRR,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (32 РАЗРЯДА) - В РГ/ТГ ПРИЗНАКОВ; УСТАНОВКА ТКК = ППК
PSICNT:ENTRY
CJP А=CNTR,%R%,FFCNT=SETEI
CRTN FFCNT=CLRTKK
CNTR:CRTN FFCNT=SЕТТКК
;
;===== ЗАПИСЬ ИЗ ПП (7-10 РАЗРЯДЫ) - В РГ.N СУСС
PSIN:ENTRY
CRTN SТОРС=MCN,СЕМ,CEN,FFCNT=SETEI
;
;===== ПРОПУСК КОМАНДЫ ПО ПРИКАЗУ ПП; С ВКС, ЕСЛИ НАДО!
PSIMI:ENTRY
CJPP А=G1,МАР=РЕ,FFCNT=CLRINT
G1:LDCT А=LCW,МАР=РЕ,FFCNT=SETEI,DDEV=CLRCD
JRP %МЕ%,COND=ТККВ,ISE,%RСА%,FFCNT=CLRJMP
;
;===== ЗАПРОС НА КОРРЕКТИРОВКУ СПИСКОВ ПРИОРИТЕТОВ СТРАНИЦ ИЗ ПП
PSICOR:ENTRY
CONT А=С1,DSRC=PROM,DDEV=MODB,WRD
CONT FFCNT=STRTLD
;ЖДЕМ КОНЦА ЗАГРУЗКИ
WELFLL:CJP А=WELFLL,МАР=РЕ,COND=FULMEM,IСС
CONT А=В11,DSRC=PROM,ALUS=DZ,ALU,YDST=PHYSPG
;ЗАПИСЫВАЕМ "0" В ОЗУ ПС0
CRTN ALUS=ZА,FUNC=AND,ALU,DDEV=РРМЕМ0,WRD,FFCNT=SETEI
;
;===== УСТАНОВКА ПУЛЬТОВОГО ОСТАНОВА В ОЗУ ОСТАНОВА 0
PSSS0:ENTRY
CRTN А=ZER,DSRC=PROM,ALUS=DZ,ALU,YDEV=SТОРМ0,WRY,FFCNT=SETEI
;
;===== СТИРАНИЕ АДРЕСА ПУЛЬТОВОГО ОСТАНОВА В ОЗУ ОСТАНОВА 0
PSCS0:ENTRY
CRTN А=С1,DSRC=PROM,ALUS=DZ,ALU,YDEV=SТОРМ0,WRY,FFCNT=SETEI
;
;===== УСТАНОВКА ПУЛЬТОВОГО ОСТАНОВА В ОЗУ ОСТАНОВА 1
PSSS1:ENTRY
CRTN А=ZER,DSRC=PROM,ALUS=DZ,ALU,YDEV=SТОРМ1,WRY,FFCNT=SETEI
;
;===== СТИРАНИЕ АДРЕСА ПУЛЬТОВОГО ОСТАНОВА В ОЗУ ОСТАНОВА 1
PSCS1:ENTRY
CRTN А=С1,DSRC=PROM,ALUS=DZ,ALU,YDEV=SТОРМ1,WRY,FFCNT=SETEI
;
;===== ЗАМЕНА ЛЕВОЙ КОМАНДЫ (32 СТАРШИХ РАЗРЯДА) В РГ.КОМАНД ПО ЗАПРОСУ ПП
PSILC:ENTRY
;СДВИГАЕМ ЗАМЕНЯЮЩУЮ КОМАНДУ В СТ.РАЗРЯДЫ
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR6,RВ=WR6,ALU,DSRC=SHIFT,MPS,PSHF=SН0-32
>,SHF=LOG
PSLRC:CRTN ALUS=АВ,RА=WR1,RВ=WR6,FUNC=OR,Н,ALU,ЕСВ,WRB,BRA=RG1,FFCNT=SETEI
;
;===== ЗАМЕНА ПРАВОЙ КОМАНДЫ (32 МЛАДШИХ РАЗРЯДА) В РГ.КОМАНД ПО ЗАПРОСУ ПП
PSIRC:ENTRY
CONT А=MNH,DSRC=PROM,ALUS=DА,RА=WR1,FUNC=AND,Н,ALUD=В,RВ=WR1
;ОБНУЛЯЕМ СТ.РАЗРЯДЫ ЧИСЛА ИЗ БОПП
CJP А=PSLRC,МАР=РЕ,ALUS=АВ,RА=HALF,RВ=WR6,FUNC=AND,Н,ALUD=В
;
;===== ПУСК ЦП, НАЧИНАЯ С ЛК, ЗАПИСАННОЙ В РЕГИСТРЕ КОМАНД (ПО ЗАПРОСУ ПП)
PSRUNL:ENTRY
CJPP А=L1,МАР=РЕ,FFCNT=CLRRCB
L1:CJPP А=L2,МАР=РЕ,FFCNT=CLRINT,DDEV=CLRCD
L2:CJPP %МЕ%,%RСА%,FFCNT=SETEI
;
;===== ПУСК ЦП, НАЧИНАЯ С ЛК ПО ЗАДАННОМУ АДРЕСУ (ПО ЗАПРОСУ ПП)
PSRUNA:ENTRY
CJPP А=R1,МАР=РЕ,FFCNT=CLRRCB,DDEV=CLRCD
R1:CJPP А=R2,МАР=РЕ,FFCNT=CLRINT
R2:CJPP А=LCWPH,МАР=РЕ,ALUS=ZА,RА=WR6,ALUD=В,RВ=РС,ALU,YDST=ADRREG,FFCNT=SETEI
;
;===== УСТАНОВКА ПРОГРАММНОГО ПРЕРЫВАНИЯ ПО ЗАПРОСУ ПП
PSPINT:ENTRY
CRTN А=В41,DSRC=PROM,ALUS=DА,RА=INTR,FUNC=OR,Н,ALUD=В,RВ=INTR,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (64 РАЗРЯДА) - В ЧАСЫ СЧЕТНОГО ВРЕМЕНИ
PSIT:ENTRY
CJP А=INZ16,МАР=РЕ,COND=СТ,SТОРС=/NZ,ALUS=ZА,RА=WR6,Н,ALUD=В,RВ=WR5,ALU
>,CSM,WЕМ,MNSA=МР,MODNM=CTR,ЕСВ,WRB,BRA=RG3
CONT А=В17,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=SUBR,Н,CI,ALU,CSM,WЕМ,MNSA=МР
>,MODNM=CTR,ЕСВ,WRB,BRA=RG3
CONT ALUS=ZА,RА=HALF,ALUD=В,RВ=WR5
INZ16:CJS А=CTWR,МАР=РЕ,ЕСВ,BRA=RG3,DSRC=SHIFT,MPS,PSHF=SН0+32,SHF=LOG
>,ALUS=DZ,Н,ALUD=В,RВ=WR1
CRTN ALUS=ZА,RА=WR1,ALU,CSM,WЕМ,MNSA=МР,MODNM=CTL,FFCNT=SETEI
;
;===== ЗАПИСЬ ИЗ ПП (32 РАЗРЯДА) - В ТАЙМЕР СЧЕТНОГО ВРЕМЕНИ
PSITT:ENTRY
CJP А=PRGP,МАР=РЕ,COND=СТ,SТОРС=NZ
>,ALUS=ZА,RА=WR6,ALUD=В,RВ=WR5,ALU,CSM,WЕМ,MNSA=МР,MODNM=СТТ
CONT А=MQ,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=AND,CEN
CJP А=РТСТ,МАР=РЕ,COND=СТ,SТОРС=/NZ
CONT А=В17,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=SUBR,CI,ALU,CSM,WЕМ
>,MNSA=МР,MODNM=СТТ
CJP А=РТСТ,МАР=РЕ,ALUS=ZА,RА=HALF,ALUD=В,RВ=WR5
;ТАЙМЕР = 0: В40 - В ГРП + ПРОГРАММНОЕ ПРЕРЫВАНИЕ
PRGP:CONT А=В40,DSRC=PROM,ALUS=DА,RА=INTR,FUNC=OR,Н,ALUD=В,RВ=INTR,FFCNT=PRGINT
CONT ALUS=ZA,RA=HALF,ALUD=B,RB=WR5,ALU,CSM,WEM,MNSA=MP,MODNM=CTT
РТСТ:CJP А=CTTWR,МАР=РЕ,FFCNT=SETEI
;
;     I====================================I
;     I  ВЫДАЧА РЕГИСТРОВ И ПАМЯТИ В  П П  I
;     I====================================I
;
;===== ВЫДАЧА РГ.ИСПОЛНИТЕЛЬНОГО АДРЕСА (20 РАЗРЯДОВ) - В ПП
PSOADR:ENTRY
JRP А=MADR,IСС,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.НОМЕРА ГРУППЫ (6-10 РАЗРЯДЫ) - В ПП
PSOMGN:ENTRY
JRP А=MGN5,IСС,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.ФИЗИЧЕСКОЙ СТРАНИЦЫ (РФС), 11-20 РАЗРЯДЫ - В ПП
PSOPHP:ENTRY
JRP А=MPG,IСС,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ/ТГ ПРИЗНАКОВ (БЕЗ ЧТЕНИЯ РР И М), 32 РАЗРЯДА - В ПП
PSOCNT:ENTRY
JRP А=MFLFL,IСС,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.КОП АРБИТРА, 4 РАЗРЯДА - В ПП
PSOARB:ENTRY
JRP А=С15,IСС,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РГ.М,N СУСС (7-10 РАЗРЯДЫ) - В ПП
PSOIND:ENTRY
JRP А=MIND,IСС,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА РЕЗУЛЬТАТА ПОИСКА ЛЕВОЙ ЕДИНИЦЫ СУММАТОРА (7 РАЗРЯДОВ) - В ПП
PSOLOS:ENTRY
JRP А=М7В,IСС,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
;
;===== ВЫДАЧА ЧАСОВ СЧЕТНОГО ВРЕМЕНИ (64 РАЗРЯДА) - В ПП
PSOT:ENTRY
CONT CSM,MNSA=МР,MODNM=CTL,ALUS=DZ,ALUD=В,RВ=WR1
CJS А=CTRD,МАР=РЕ,ALUS=DQ,FUNC=OR,Н,ALUD=ВА,RА=WR1,RВ=WR1,ALU,DSRC=SHIFT
>,MPS,PSHF=SН0-32,SHF=LOG
CONT А=MNQ,DSRC=PROM,ALUS=DА,RА=WR1,FUNC=AND,Н,ALUD=В,RВ=WR6
CJP А=RGTOMP,МАР=РЕ,ALUS=АВ,RА=WR5,RВ=WR6,FUNC=ADD,Н,ALUD=В
;
;===== ВЫДАЧА ТАЙМЕРА СЧЕТНОГО ВРЕМЕНИ (32 РАЗРЯДА) - В ПП
PSOTT:ENTRY
CJS А=CTTRD,МАР=РЕ,CSM,MNSA=МР,MODNM=СТТ,ALUS=DА,RА=WR6,FUNC=AND,Н,ALUD=В,RВ=WR6
CJP А=RGTOMP,МАР=РЕ,ALUS=АВ,RА=WR5,RВ=WR6,FUNC=OR,Н,ALUD=В
;
RGTOMP:ENTRY
;===== ПЕРЕСЫЛКА РГ.WR6 - В DАТАВ1-DАТАВ8 РГ.БОПП ПО ЗАПРОСУ ПП
;   ПОСЛЕ ПЕРЕПИСИ - УСТАНАВЛИВАЕМ ПРИЗНАК: "В ОЗУ ПП->ЦП ЕСТЬ ИНФОРМАЦИЯ";
;   ОТКРЫВАЕМ МАСКУ.
;   МЛАДШИЙ БАЙТ - В СТАРШЕМ ПО НОМЕРУ РЕГИСТРЕ!
;   ВОЗВРАТ ИЗ ПРЕРЫВАННИЯ - ПО АДРЕСУ СТЕКА!
;
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR6,RВ=WR6,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=DАТАВ8
>,DSRC=SHIFT,MPS,PSHF=SН0+8,SHF=LOG
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR6,RВ=WR6,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=DАТАВ7
>,DSRC=SHIFT,MPS,PSHF=SН0+8,SHF=LOG
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR6,RВ=WR6,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=DАТАВ6
>,DSRC=SHIFT,MPS,PSHF=SН0+8,SHF=LOG
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR6,RВ=WR6,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=DАТАВ5
>,DSRC=SHIFT,MPS,PSHF=SН0+8,SHF=LOG
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR6,RВ=WR6,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=DАТАВ4
>,DSRC=SHIFT,MPS,PSHF=SН0+8,SHF=LOG
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR6,RВ=WR6,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=DАТАВ3
>,DSRC=SHIFT,MPS,PSHF=SН0+8,SHF=LOG
CONT ALUS=DZ,Н,ALUD=ВА,RА=WR6,RВ=WR6,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=DАТАВ2
>,DSRC=SHIFT,MPS,PSHF=SН0+8,SHF=LOG
CONT ALUS=ZА,Н,RА=WR6,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=DАТАВ1
CONT YDEV=МРМЕМ,IОМР,MPADR=FМР,DSRC=SHIFT,MPS,PSHF=SН0,SHF=LOG,ALUS=DZ
>,ALUD=В,RВ=WR6
CONT А=В1,DSRC=PROM,ALUS=DА,RА=WR6,FUNC=OR,ALU,YDEV=МРМЕМ,WRY,IОМР,MPADR=FМР
CRTN FFCNT=SETEI
ENDPS:ENTRY
END
*END
*END F
*END FILE
