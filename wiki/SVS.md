
# Архитектура ЭВМ СВС

ЭВМ СВС была разработана в 1980 году как более быстрая версия ЦП БЭСМ-6 на интегральных схемах.
Официально она называлась Эльбрус-1К2. Она была примерно в два с половиной раза быстрее, чем БЭСМ-6.
Элементной базой была 100 серия ЭСЛ, тактовая частота 20 МГц.
ЭВМ СВС имела до 10 процессоров и до 4х процессоров ввода-вывода (унаследованных от Эльбрус-1).

## Регистры привилегированного режима

В режиме супервизора команда РЕГ позволяет обращаться к управляющим регистрам процессора.

Адрес | Регистр
----- | -------
20-27 | Запись в регистры приписки режима пользователя.
30-33 | Запись в регистры защиты.
  34  | Запись в регистр конфигурации оперативной памяти.
  35  | Гашение сигнала контроля от оперативной памяти (СКООП).
 235  | Чтение сигнала контроля от оперативной памяти (СКООП).
  36  | Запись маски главного регистра прерываний (МГРП).
 236  | Чтение маски главного регистра прерываний (МГРП).
  37  | Сброс главного регистра прерываний (ГРП).
 237  | Чтение главного регистра прерываний (ГРП).
  44  | Запись в регистр тега.
 244  | Чтение регистра тега.
 245  | Чтение номера процессора.
  46  | Запись маски регистра внешних прерываний (МРВП).
 246  | Чтение маски регистра внешних прерываний (МРВП).
  47  | Сброс регистра внешних прерываний (РВП).
 247  | Чтение регистра внешних прерываний (РВП).
  50  | Запись в регистр прерываний процессорам (ПП).
 250  | Чтение регистра прерываний процессорам (ПП).
  51  | Запись в регистр ответов процессорам (ОПП).
 251  | Чтение регистра ответов процессорам (ОПП).
  52  | Запись в регистр прерываний от процессоров (ПОП).
 252  | Чтение регистра прерываний от процессоров (ПОП).
  53  | Запись в регистр ответов от процессоров (ОПОП).
 253  | Чтение регистра ответов от процессоров (ОПОП).
  54  | Запись в регистр конфигурации процессоров (РКП).
 254  | Чтение регистра конфигурации процессоров (РКП).
  55  | Запись в регистр аварии процессоров.
 255  | Чтение регистра аварии процессоров.
  56  | Запись в регистр часов.
 256  | Чтение регистра часов.
  57  | Запись в регистр таймера.
 257  | Чтение регистра таймера.
60-67 | Запись в регистры приписки супервизора.
100-107 | Установка битов ПКЛ, ПКП и БРО.
 140  | Сброс контрольных признаков (СКП).


## 20-27 - РП, регистры приписки

Регистры приписки определяют для каждой виртуальной страницы номер физической страницы. При трансляции виртуального адреса в физический биты 15:11 задают номер виртуальной страницы. По этому номеру из регистров приписки извлекается номер физической страницы. 

Всего имеется 8 регистров приписки по 48 бит. Каждый регистр приписки состоит из четырёх 12-битных полей. 

| 48 ... 37 | 36 ... 25 | 24 ... 13 | 12 ... 1 |
| --------- | --------- | --------- | -------- |
| ФИЗ\[i+3] | ФИЗ\[i+2] | ФИЗ\[i+1] |  ФИЗ\[i] |

Поле ФИЗ\[i]: номер физической страницы для виртуальной страницы с индексом i.

## 54 - РКП, регистр конфигурации процессоров

РКП задаёт маску процессоров СВС, процессоров ввода-вывода и модулей передачи данных.

| 48 47 | 46 | 45 | 44 | 43 | 42 | 41 | 40 | 39 | 38 | 37 | 36 | 35 | 34 | 33 | 32 ... 1 |
| ----- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -------- |
|   0   | V4 | V3 | V2 | V1 | P8 | P7 | P6 | P5 | P4 | P3 | P2 | P1 | MR | MT |     0    |

Биты V1-V4: присутствие процесоров ввода-вывода (МПД).

Биты P1-P8: присутствие процессоров СВС.

Бит MR: разрешение приёма от модуля передачи данных (МПД).

Бит MT: разрешение прерывания по передаче от МПД.

## TODO
