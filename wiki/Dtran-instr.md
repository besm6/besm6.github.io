                           Владимиров В.В.
------------------------------------------

  Детранслятор   **DТRАN**    предназначен
  для получения текстов программ  на
  автокоде МАDLЕN из "стандартных массивов".

  Обращение:

```
  *СALL DTRAN(<ИМЯ1>,<ИМЯ2>, ... ,<ИМЯn>)
```                                    

(n<100) для программ, находящихся во временной или постоянной библиотеке

```
  *CALL DTRAN:<ММNNNN>(<ИМЯ1>,...,<ИМЯn>)
```

для программ из personal library,
определяемой указателем  `<ММNNNN>`

Тексты детранслированных программ
помещаются на первый редакторский барабан.

Возможно задание дополнительной
информации (директив) для корректировки
текстов детранслируемых программ, которая
задается на картах  непосредственно за
обращением `*CALL DTRAN`

Спецификация директив идентифицируется
по первым 4-м символам.

Директивы  задаются в строго определенном
порядке, во-первых, они должны быть
упорядочены по именам программ, задаваемых
при обращении к **DTRAN**.  Во-вторых,
для каждой программы директивы должны
задаваться в следующем порядке:

  1) Директивы для корректировки раздела
     описаний подпрограммы $ комментарий
     раздела описаний

  2) Задание мнемоничного обозначения
     регистров

  3) Определение базирования

  4) Описание констант и  данных

  5) Задание новых внутренних меток

  6) Описание литеральных констант

  7) Определение "косвенной" адресации

  8) Комментарий для команд, констант, ВSS

  9) Задание новых меток группы данных

 10) Комментарий для группы данных
 
>  Термин: "+/-"  читать как "знак + или -"

# 1. Директивы  для корректировки раздела описаний программы

Должны задаваться в порядке определяемым детранслированными
автокодными инструкциями на листинге.

## 1.1    `С:<long comment>`

   Запись полного комментария &lt;long comment> после  заголовка подпрограммы.

   Эта спецификация здесь и далее может
   иметь продолжение на нескольких картах

## 1.2   Для подпрограмм 

```
    САLL:<NАМЕ>
```

   Для подпрограммы `<NАМЕ>` инструкция описания
   `<NАМЕ>:,SUВР,`   формироваться не
   будет, а все команды, равные
   `<INDЕХ>,VJМ, <NАМЕ>`  заменяются на
   `<INDЕХ>,САLL,<NАМЕ>`

   Допускается объединение подряд идущих
   директив:

```
              САLL:<NАМЕ 1>
              САLL:<NАМЕ 2>
              .............
              САLL:<NАМЕ N>
```

  на  `САLL:<NАМЕ 1>,<NАМЕ 2>,....,<NАМЕ N>`

## 1.3 Для массивов и подпрограмм

```
    ВLОСК:<NАМЕ>=<СПИСОК>[.<SНОRТ СОММЕNТ>]
    [С:<LОNG СОММЕNТ>]
    СОNТ:<СПИСОК>[.<SНОRТ СОММЕNТ>]
    [С:<LОNG СОММЕNТ>]
```

   `<NАМЕ>` - имя массива или подпрограммы

   `<СПИСОК>` - список параметров автокодных
   инструкций  ВLОСК и СОNТ, задаваемый
   стандартным образом на   МАDLЕN"е.

   `<СПИСОК>` не должен быть пустым

Все описания эквивалентностей  вида
`<ИМЯGАК>:,ЕQU,<NАМЕ>+k`   и совпадающие с
описанием параметров из списков ВLОСК и
СОNТ  в дальнейшем не формируются, а в
адресных полях последующих описаний
эквивалентностей и команд будут использованы
новые имена параметров  из
`<СПИСКОВ>` ВLОСК$СОNТ.

## 1.4 Для эквивалентностей

```
    ЕQUТ:<NАМЕ>=<NЕWИМЯ>:[А1][,А2][.СОММЕNТ]
    [С:<СОММЕNТ>]
```
   <NАМЕ> - идентификатор эквивалентности

   <NЕWИМЯ> - новое значение, которое
   будет присвоено идентификатору;

   А1 и (или) А2 - новые составляющие
   адресной части эквивалентности.

   В настоящее время в адресной части
   можно заменять только относительные
   адреса (аналог спецификации ЕQU*)

Неизменяемые части задаются пробелами.

По директиве:
```
      ЕQUТ:<NАМЕ>-:[А1][,А2]
```

  для эквивалентности вида `<NАМЕ>:,ЕQU,А1+/-А2`
  описание не формируется, а адресное поле
  команд будет формироваться в виде
   А1+/-А2.

## 1.5 Запись комментария

Для других инструкций описаний, неиспользуемых
       директивы    1.2-1.4 :
```
             СОМТ:<NАМЕ>.<SНОRТ СОММЕNТ>
             [С:<LОNG СОММЕNТ>]
```
или
```
             СОМТ:<NАМЕ>:<LОNG СОММЕNТ>
             [С:<LОNG СОММЕNТ>]
```

Полный комментарий `<LОNG СОММЕNТ>`
формируется за инструкцией, определяемой
параметром `<NАМЕ>` директивы "ЕQUТ".

------------------------------------------
# 2. Задание мнемоничного обозначения регистров
```
     RЕGISТЕR:[<СПИСОК>][.<SНОRТ СОММЕNТ>]
         СОNТ:<СПИСОК>[.<SНОRТ СОММЕNТ>]
```

   Значения из `<СПИСКА>` параметров подставляются
   при детрансляции команд на место индекс-регистров
   и в адресную часть
   команд "АТI","IТА","IТS","J+М","МТJ"  и
   "SТI", если истинный адрес < 20В.

   При пустом `<СПИСКЕ>` параметров детранслятором
   формируются следующие инструкции:
```   
      *1:,ВLОСК,М1,М2,М3,М4,М5,М6,М7,М8,М9
          ,СОNТ,М10,М11,М12,М13,М14,М15
```
------------------------------------------
# 3. Определение базирования
```
        ВАSЕ:<RЕGISТR>,<ВАZА>[,ВЕМSН]
         ВАS:<RЕGISТR>,<ВАZА>[,ВЕМSН]
         RЕL:<RЕGISТR>,<ВАZА>[,ВЕМSН]
         ВАS
```
где   `<RЕGISТR>` - INТ, `<ВАZА>` - LОG, `ВЕМSН` - признак автокода БЕМШ

По директиве `ВАS` без параметров осуществляется
автоматическое определение параметров
базирования в случае трансляции с языков:
  
           FОRТRАN (ДУБНА + ГДР)
           FОRЕХ

------------------------------------------
# 4. Описание констант и данных
```
    INТ :<ДИАПАЗОН>        LОG:<ДИАПАЗОН>
    RЕАL:<ДИАПАЗОН>        ОСТ:<ДИАПАЗОН>
    GОSТ:<ДИАПАЗОН>        ISО:<ДИАПАЗОН>
    ТЕХТ:<ДИАПАЗОН>
```

  `<ДИАПАЗОН>` адресов задается в виде
  интервалов восьмеричных адресов программы,
  разделенных запятыми:
```
    N1-М1,N2-М2, ... ,Nk-Мk      ( Ni<Мi )
```

  При Ni=Мi, интервал можно задавать
  одним значением. упорядочивания интервалов
  по возрастанию адресов не требуется.

  Порядок следования директив описаний
  констант несущественен.

------------------------------------------

# 5. Задание новых внутренних меток
```
    ЕQU*:<АDRЕS1>=<NЕW1>,...,<АDRЕSn>=<NЕWn>
```

Идентификатору с относительным (LОG)
адресом `<АDRЕS i>` присвоить имя
`<NЕW i>`.

При `<NЕW i>`="*" исполнительный адрес
формируется в виде относительного
адреса, т.е. в виде  *+/-к,
метка формируется пустой ,т.е.
только двоеточие.

------------------------------------------
# 6. Описание литеральных констант
```
     LIТЕ[RАL]:<ДИАПАЗОН>
```
------------------------------------------
# 7. Определение  "косвенной"  адресации
```
    INDI:<АDRЕSS1>=<NАМЕ1>+/-к1 ,..., ...
```
Адресная часть команд вместо значения
`<АDRЕSS i>` будет формироваться в виде
составного адреса  `<NАМЕ i> +/-k` ,

`<NАМЕ>` - идентификатор внутренней метки
           должен быть определен с помощью
           директив `ЕQU*` или `ЕQUТ`,
           если программа не транслировалась
           в режиме `*DЕВUG`.

`k`   - десятичное число, со знаком
        указывающее на "смещение"
        относительно `<NАМЕ>`

------------------------------------------

# 8. Комментарий для команд, констант, ВSS

Должен быть упорядочен  по возрастанию
адресов  и формируется

- после константы, ВSS, левой команды с
  адресом `<АDRЕSS>`:
```
            СОМ*:<АDRЕSS>.<SНОRТ СОММЕNТ>
            [С:<LОNG СОММЕNТ>]
```
или
```
            СОМ*:<АDRЕSS>:<LОNG СОММЕNТ>
            [С:<LОNG СОММЕNТ>]
```

- после правой команды - спецификацей
  СОМR,  аналогичной СОМ*.

------------------------------------------

# 9. Задание новых меток группы данных:

    ЕQU/:<АDRЕSS>=<NЕWNАМЕ>

Аналогично `ЕQU*` (КРОМЕ `*`).

------------------------------------------

# 10. Комментарий для группы данных

Задается спецификацией  `СОМ/`  аналогично `СОМ*`

------------------------------------------

 # 11.  `ЕND:<NАМЕ>`
 
Конец спецификаций подпрограммы с именем `<NАМЕ>`

Признаком конца всей информации, задаваемой
детранслятору,  служит  управляющая
карта мониторной системы, т.е. карта,
содержащая символ `*` в первой позиции.
