#!/bin/bash
. options

cat <<qq >$tf1
ШИФР 419999^
ОЗУ 7^
ЛЕНТ 35($diskid_krab-ЗП)^
ВХОД 1^
ТЕЛЕ^
ВРЕ 50^
РОСП 0^
ЕВ1
К 00 23 00200 15 24 40000
К 00 010 0102 00 050 0121
К 00 010 0100 15 31 00013
К 00 010 0103 00 050 0131
К 15 24 40000
К 00 010 0103 00 050 0121
К 15 24 00000
К 00 010 0103 00 050 0121
К 00 070 0101
К 00 30 02002
К 00 012 0000 00 050 7702
К 16 044 0014 00 031 0100
К 14 000 0007 00 050 0156
К 14 012 0010 14 27 00005
К 14 010 0007 14 020 0011
К 14 021 0012 14 000 0007
К 14 010 0007 00 050 0112
К 15 30 00000 00 22 00000
С 0
С 1
С 77 7740
С 77 0177
В100
С 35 0000
С 0010 0100 0035 0035
С 20130
С 3377 0000 0002 0231
В200
С 0
С 0
С 0
В400
БСЕРЕЖА
ЕКОНЕЦ
qq

expect -f - <<EOF
spawn dispak -bv $tf1
		expect "S00010*\n"
send "100004=12\n"
		expect "^- "
send "g\n"
		expect "РЕЖИМ РАБОТЫ*\n"
send "ген\n"
		expect "СЕТЬ(ДА,НЕТ)*\n"
send "нет\n"
		expect "КОЛ-ВО АРХИВОВ*\n"
send "1\n"
		expect "N  МД АРХ 01*\n"
send "2063\n"
		expect "НАЧ.ЗОНА*\n"
send "300\n"
		expect "КОН.ЗОНА*\n"
send "1677\n"
		expect "ОБСЛУЖИВАЕТСЯ БСС (ДА,НЕТ)*\n"
send "нет\n"
		expect "АРХИВ ЗАКРЫТ(ДА,НЕТ)*\n"
send "нет\n"
		expect "СИСТЕМНЫЙ АРХИВ (ДА,НЕТ)*\n"
send "нет\n"
		expect "ДУБЛИРОВАНИЕ (ДА,НЕТ)*\n"
send "нет\n"
		expect "СТАТИСТИКА (ДА,НЕТ)*\n"
send "да\n"
		expect "НАЧ.ЗОНА*\n"
send "200\n"
		expect "КОН.ЗОНА*\n"
send "277\n"
		expect "МЛ СТАТИСТИКИ*\n"
send "202\n"
		expect "БЮДЖЕТ (ДА,НЕТ)*\n"
send "нет\n"
		expect "ДЖИН ЕСТЬ (ДА,НЕТ)*\n"
send "нет\n"
		expect "СЛУЖЕБНЫЙ ШИФР*\n"
send "419998\n"
		expect "ПАРОЛЬ СЛУЖЕБНОГО ШИФРА*\n"
send "нет\n"
		expect "СИСТЕМНЫЙ ВХОД*\n"
send "4102\n"
		expect "ПАРОЛЬ АДМИНИСТРАТОРА СИСТЕМЫ*\n"
send "ворон\n"
		expect "КОНТРОЛЛЕР(ДА,НЕТ)*\n"
send "нет\n"
		expect "ФЛАГИ*\n"
send "нет\n"
		expect "НЕСТАНДАРТНЫЕ ДИРЕКТИВЫ (ДА,НЕТ)*\n"
send "нет\n"
		expect "ТАБЛИЦА ЗАМЕНЫ (ДА,НЕТ)*\n"
send "нет\n"
		expect "СТАНДАРТНЫЙ ШАГ*\n"
send "14\n"
		expect "НОМ МД*\n"
send "2063\n"
		expect "НАЧ.ЗОНА*\n"
send "100\n"
		expect "КОН.ЗОНА*\n"
send "177\n"
		expect "СРОК ХРАНЕНИЯ ФАЙЛОВ НА СБ. ЗОНАХ (В ДНЯХ)*\n"
send "3\n"
		expect "КОЛ-ВО ЗАКРЫТЫХ КОМПЛЕКТОВ СБ.ЗОН*\n"
send "3\n"
		expect "БУФЕР ВВОДА СИСТЕМЫ КРАБ(ДА,НЕТ)*\n"
send "нет\n"
		expect "АВАРИЙНАЯ ВЫДАЧА*\n"
send "нет\n"
		expect "ВРЕМЯ ОЖИДАНИЕ В КАНАЛЕ(МИН)*\n"
send "1\n"
		expect "ТЕРМИНАЛ ЭВМ*\n"
send "нет\n"
		expect "ШИФР СИСТЕМЫ Б Э С М*\n"
send "419997000000\n"
		expect "ПАСПОРТ БЭСМ*\n"
send "зсб\n"
		expect "ВЫДАТЬ ПАРАМЕТРЫ (ДА,НЕТ)*\n"
send "нет\n"
		expect "ПЕЧАТЬ (ДА,НЕТ)*\n"
send "нет\n"
		expect "ЗАПИСАТЬ (ДА,НЕТ)*\n"
send "да\n"
		expect "КОНЕЦ ЗАДАЧИ"
EOF

uz=`echo "obase=8;ibase=8;$diskoff_krab+5" | bc -l`
besmtool write $diskid_krab --from-file=binary/vseed --start=$uz --length=1
